<script>
    // CREATING CUSTOM ELEMENTS TO RESOLVE IE8 ISSUE IN ANGULAR
    document.createElement('ng-include');
    document.createElement('ng-pluralize');
    document.createElement('ng-view');
    document.createElement('rzslider');

    // Optionally these for CSS
    document.createElement('ng:include');
    document.createElement('ng:pluralize');
    document.createElement('ng:view');
    document.createElement('rzslider');
</script>
<style> 
    .breadcrumb .layout2{
        display:none;
    }
    .breadcrumb.saved .layout{
        display:none !important;
    }
    .breadcrumb.saved .layout2{
        display:inline-block;
    }
    
    #menuVel{
        /*width:100%;*/
    }

    .uniformjs label.radio{
        margin:0 20px 0 0;
    }
    .btn-delete{
        background-color: #e60000;
        border:1px solid #be0000;
    }
    .btn-delete:hover{
        background-color: #e60000;
        border:1px solid #be0000;
    }
    .breadcrumb{
        height:53px;
        margin-bottom: 13px;
        box-shadow: 4px 4px 17px #323232;
    }
    .floating_panel {

        box-shadow: 4px 4px 17px #323232;
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 99;
    }


    .widget{
        margin:0px;
        border-top: none;
        border-right: none;
    }
    .col-md-9{
        min-height: 700px;
        width: 84.8%;
        padding-right: 0px;
        /*margin-top: -15px;
        margin-left: 4px;*/
    }
    .col-md-2{
        width: 15%;
        padding-right: 0px;
        /*min-height: 700px;*/
        background-color: #fbfbfb;
        border-right: 1px solid #e8e8e8;
    }

    #menuVel .slim-scroll > ul > li.glyphicons a i:before, #menuVel > ul > li.glyphicons a i:before, #menuVel .slim-scroll > ul > li.glyphicons-social a i:before, #menuVel > ul > li.glyphicons-social a i:before{
        color:#7c7c7c;
    }
    #menuVel .slim-scroll > ul > li.glyphicons.active a i:before{
        color: orange;
    }
    .velocity-main{
        background-color: #fdfdf3;
    }
    

</style>


  

<div xmlns:ng="http://angularjs.org">


<?php
    //GETTING VALUES FROM THE CONTROLLER
    $settings =  Mage::getSingleton('supercheckout/supercheckout')->getData('settings');
    $guest_checkout_enable=  Mage::getSingleton('supercheckout/supercheckout')->getData('guest_checkout_enable');
    $agreements_enable =  Mage::getSingleton('supercheckout/supercheckout')->getData('agreements_enable');
    $payment_methods =  Mage::getSingleton('supercheckout/supercheckout')->getData('payment_methods');
    $shipping_methods =  Mage::getSingleton('supercheckout/supercheckout')->getData('shipping_methods');
    $layout =  Mage::getSingleton('supercheckout/supercheckout')->getData('layout');
    $magentoCurrentUrl = Mage::helper("adminhtml")->getUrl("supercheckout/adminhtml_supercheckout/index");
    $store_data=  Mage::getSingleton('supercheckout/supercheckout')->getData('store_data');
    $browser_used_ie=  Mage::getSingleton('supercheckout/supercheckout')->getData('browser_used_ie');
    $success=  Mage::getSingleton('adminhtml/session')->getData('success');
    $success_msg=  Mage::getSingleton('supercheckout/supercheckout')->getData('success_msg');
    
?>
<?php 
    if($layout=='3-Column'){ 
        $layout_name = "three-column";
    }elseif($layout=='2-Column'){ 
        $layout_name = "two-column";
    }
    
    $payment_address_fields_array = array();
    foreach($settings['step']['payment_address']['fields'] as $fieldss){
        
        $payment_address_fields_array[] = $fieldss;
    }
    $shipping_address_fields_array = array();
    foreach($settings['step']['shipping_address']['fields'] as $fieldss){
        
        $shipping_address_fields_array[] = $fieldss;
    }
?>
<script>
var app = angular.module('supercheckout', ['ngResource','rzModule','ui.tree','ui.bootstrap','ngCookies']);

//app.directive("scroll", function ($window) {    
//    return function(scope, element, attrs) {
//        angular.element($window).bind("scroll", function() {
//            var breadcrumbTop = document.getElementById('wrapper').getBoundingClientRect().top;
//            if (breadcrumbTop <= 80) {                 
//                scope.booladdClass = 'floating_panel';
//            } else {                 
//                scope.booladdClass = '';
//            }
//            scope.$apply();
//        });
//    };
//});
app.controller('MainCtrl', function($scope) {
  
});


//DRAG AND DROP CONTROLLER TO HANDLE DRAG AND DROP FUNCTIONALITY FOR DESIGN AND PAYMENT/SHIPPING ADDRESS
(function() {
  'use strict';

  app.controller('drag_and_drop', function($scope,$cookies,$http) {
      
      
    
  $scope.resetall = function(){
    $http({
            method:'GET',
            url:'<?php echo $this->getUrl('supercheckout/adminhtml_supercheckout/resetDefaultSettings') ?>',
            data:document.getElementById('form').serialize()
        }).
        success(function(response, status, headers, config) {
            window.location = '<?php echo $magentoCurrentUrl; ?>';
        })
  }  
  
  $scope.enable_column_width_fields = '<?php echo $layout_name; ?>';
  $scope.payment_address_fields = <?php echo json_encode($settings['step']['payment_address']['fields']); ?>;
  
  //SLIDER IN DESIGN TAB FOR THREE COLUMN
  $scope.priceSlider = {
    min: <?php echo $settings['general']['column_width']['three-column'][1]; ?>,
    max: <?php echo $settings['general']['column_width']['three-column'][1] + $settings['general']['column_width']['three-column'][2] ; ?>,
    ceil: 100,
    floor: 0,
    step: 1
  };  
  //UPPER SLIDER IN DESIGN TAB FOR TWO COLUMN
  $scope.twoColumnSlider = {
    min: <?php echo $settings['general']['column_width']['two-column'][1]; ?>,
    ceil: 100,
    floor: 0,
    step: 1
  };  
  //LOWER SLIDER IN DESIGN TAB FOR TWO COLUMN
  $scope.twoColumnInsideSlider = {
    min: <?php echo $settings['general']['column_width']['two-column']['inside'][1]; ?>,
    ceil: 100,
    floor: 0,
    step: 1
  };  
  //FUNCTIONS TO SET VALUES FOR COLUMNS WIDTH AS PER THE SLIDER
    $scope.first_column = function () {
        return $scope.priceSlider.min;
    };
    $scope.middle_column = function () {
        return $scope.priceSlider.max - $scope.priceSlider.min;
    };
    $scope.last_column = function () {
        return $scope.priceSlider.ceil - $scope.priceSlider.max;
    };
    $scope.last_column_width = function () {
        return $scope.priceSlider.ceil - ($scope.priceSlider.max + 1);
    };
    $scope.first_column_twolayout = function () {
        return $scope.twoColumnSlider.min;
    };
    $scope.second_column = function(){
        return $scope.twoColumnSlider.ceil - $scope.twoColumnSlider.min;
    };    
    $scope.first_column_inside = function(){
        return $scope.twoColumnInsideSlider.min;
    };
    $scope.second_column_inside = function(){
        return $scope.twoColumnInsideSlider.ceil - $scope.twoColumnInsideSlider.min;
    };
    //FUNCTION TO CREATE REPLICA OF HTML CONTENT 
    $scope.duplicate_html = function(event){
        var id= event.target.id;
        var portlet_id = angular.element( document.querySelector('#'+id)).parent().parent().parent().parent().attr('id');
        var data_id = angular.element( document.querySelector('#'+portlet_id)).attr('data');
        var storage_id = angular.element( document.querySelector('#storage_id')).val();
        var new_id =  parseInt(storage_id);
        new_id++;
        angular.element( document.querySelector('#storage_id')).val(new_id);
        var col_inside_data = angular.element( document.querySelector('.portlet_'+ data_id + '_col_inside_data')).val();
        var col_data = angular.element( document.querySelector('.portlet_'+ data_id + '_col_data')).val();
        var row_data = angular.element( document.querySelector('.portlet_'+ data_id + '_row_data')).val();

        var data = angular.element( document.querySelector('#value_modal')).val();
        var new_data =  parseInt(data);
        new_data++;
        var string = '<input type="hidden" id="modals-bootbox-prompt_h_'+ new_data + '_'+ new_data +'" name = "supercheckout[step][html_value][value]['+ new_data + '_'+ new_data +']">'
        angular.element( document.querySelector('#supercheckout-admin-design')).append(string);
        angular.element( document.querySelector('#value_modal')).val(new_data);
        if("<?php echo $layout; ?>"=='2-Column'){ 
                if(col_inside_data == 1){
                    $scope.list1.push(
                 {
                      "id": new_id,
                      "title": "<?php echo $this->__('Html Content'); ?>",
                      "content":"",
                      "name":"html",
                      "layout_name":"<?php echo $layout_name; ?>",
                      "col_data":col_data,
                      "row_data":row_data,
                      "col_inside_data":col_inside_data,
                      "attributes":true,
                      "data":new_data+ '_' + new_data,
                      "show":true
                    });
                }
                if(col_inside_data == 2){
                    $scope.upper_column.push(
                 {
                      "id": new_id,
                      "title": "<?php echo $this->__('Html Content'); ?>",
                      "content":"",
                      "name":"html",
                      "layout_name":"<?php echo $layout_name; ?>",
                      "col_data":col_data,
                      "row_data":row_data,
                      "col_inside_data":col_inside_data,
                      "attributes":true,
                      "data":new_data+ '_' + new_data,
                      "show":true
                    });
                }
                if(col_inside_data == 3){
//                     if(col_data == 1){
                            $scope.column_inside_left.push(
                             {
                                  "id": new_id,
                                  "title": "<?php echo $this->__('Html Content'); ?>",
                                  "content":"",
                                  "name":"html",
                                  "layout_name":"<?php echo $layout_name; ?>",
                                  "col_data":col_data,
                                  "row_data":row_data,
                                  "col_inside_data":col_inside_data,
                                  "attributes":true,
                                  "data":new_data+ '_' + new_data,
                                  "show":true
                                });
//                    }else{
                        
//                    }
                }
                if(col_inside_data == 5){
                    $scope.column_inside_right.push(
                             {
                                  "id": new_id,
                                  "title": "<?php echo $this->__('Html Content'); ?>",
                                  "content":"",
                                  "name":"html",
                                  "layout_name":"<?php echo $layout_name; ?>",
                                  "col_data":col_data,
                                  "row_data":row_data,
                                  "col_inside_data":col_inside_data,
                                  "attributes":true,
                                  "data":new_data+ '_' + new_data,
                                  "show":true
                                });
                }
                if(col_inside_data == 4){
                    $scope.lower_column.push(
                 {
                      "id": new_id,
                      "title": "<?php echo $this->__('Html Content'); ?>",
                      "content":"",
                      "name":"html",
                      "layout_name":"<?php echo $layout_name; ?>",
                      "col_data":col_data,
                      "row_data":row_data,
                      "col_inside_data":col_inside_data,
                      "attributes":true,
                      "data":new_data+ '_' + new_data,
                      "show":true
                    });
                }
            }else{
                if(col_data == 1){
                $scope.list1.push(
                 {
                      "id": new_id,
                      "title": "<?php echo $this->__('Html Content'); ?>",
                      "content":"",
                      "name":"html",
                      "layout_name":"<?php echo $layout_name; ?>",
                      "col_data":col_data,
                      "row_data":row_data,
                      "col_inside_data":col_inside_data,
                      "attributes":true,
                      "data":new_data+ '_' + new_data,
                      "show":true
                    });
                }
                if(col_data == 2){
                $scope.list2.push(
                 {
                      "id": new_id,
                      "title": "<?php echo $this->__('Html Content'); ?>",
                      "content":"",
                      "name":"html",
                      "layout_name":"<?php echo $layout_name; ?>",
                      "col_data":col_data,
                      "row_data":row_data,
                      "col_inside_data":col_inside_data,
                      "attributes":true,
                      "data":new_data+ '_' + new_data,
                      "show":true
                    });
                }
                if(col_data == 3){
                $scope.list3.push(
                 {
                      "id": new_id,
                      "title": "<?php echo $this->__('Html Content'); ?>",
                      "content":"",
                      "name":"html",
                      "layout_name":"<?php echo $layout_name; ?>",
                      "col_data":col_data,
                      "row_data":row_data,
                      "col_inside_data":col_inside_data,
                      "attributes":true,
                      "data":new_data+ '_' + new_data,
                      "show":true
                    });
                }
            }

}
      
      // SETTING COOKIE IN CASE LAYOUT IS CHANGED
      $scope.$watch('$viewContentLoaded', function(){
          
          var cookieValue = "";
          var cookieValue = $cookies.supercheckoutTab;
          if(cookieValue == 'design'){
              $scope.tab = 'design';
              $cookies.supercheckoutTab = '';
          }else{
              $scope.tab = 'general';
          }
     });
      //DISABLING REQUIRE CHECKBOX
      $scope.disableFunc = function(event){
          if(document.getElementById(event.target.id).checked === false){
              document.getElementById(event.target.id + '_require').disabled = true;
          }
          if(document.getElementById(event.target.id).checked === true){
              document.getElementById(event.target.id + '_require').disabled = false;
          }
      }
      $scope.payment_address_fieldss = <?php echo json_encode($payment_address_fields_array); ?>;
      $scope.shipping_address_fieldss = <?php echo json_encode($shipping_address_fields_array); ?>;
      $scope.payment_address_drag = {
          dropped: function(event){              
              
              for(i=0; i< event.dest.nodesScope.payment_address_fieldss.length ;i++ ){
                  document.getElementById('field_ul_'+ event.dest.nodesScope.payment_address_fieldss[i].id+'_text').value = i;
              }
          }
             
      };
      $scope.shipping_address_drag = {
          
      dropped: function(event){              
              
              for(i=0; i< event.dest.nodesScope.shipping_address_fieldss.length ;i++ ){
                  document.getElementById('field_ul_'+ event.dest.nodesScope.shipping_address_fieldss[i].id+'_text_shipping').value = i;
              }
          }
          
      }
      // COLUMN 1 ITEMS LAYOUT->3-COLUMN
    $scope.options_list1 = {     
        
        dropped: function(event){
            if(event.dest.nodesScope.isParent(event.source.nodeScope)){
                for(i=0; i< event.dest.nodesScope.list1.length ;i++ ){                
                        var getcol = document.getElementById(event.dest.nodesScope.list1[i].id+'_col').value
                        if(getcol != 1){
                            document.getElementById(event.dest.nodesScope.list1[i].id+'_col').value = 1;
                        }
                    }  
                    for(i=0; i< event.dest.nodesScope.list1.length ;i++ ){   
                          document.getElementById(event.dest.nodesScope.list1[i].id+'_row').value = i;
                      }  
            }else{
                for(var i = 0; i<event.dest.nodesScope.list1.length ;i++){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col').value = 1;
                }
                for(var j = 0; j<event.dest.nodesScope.list1.length ;j++){
                 document.getElementById(event.dest.nodesScope.list1[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.list2.length ;i++){
                    document.getElementById(event.dest.nodesScope.list2[i].id+'_col').value = 2;
                }
                for(var j = 0; j<event.dest.nodesScope.list2.length ;j++){
                 document.getElementById(event.dest.nodesScope.list2[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.list3.length ;i++){
                    document.getElementById(event.dest.nodesScope.list3[i].id+'_col').value = 3;
                }
                for(var j = 0; j<event.dest.nodesScope.list3.length ;j++){
                 document.getElementById(event.dest.nodesScope.list3[j].id+'_row').value = j;
                }
                }   
        }     
    } 
    // COLUMN 2 ITEMS LAYOUT->3-COLUMN
    $scope.options_list2 = {  
        dropped: function(event){
            
            if(event.dest.nodesScope.isParent(event.source.nodeScope)){
                for(i=0; i< event.dest.nodesScope.list2.length ;i++ ){                
                    var getcol = document.getElementById(event.dest.nodesScope.list2[i].id+'_col').value
                    if(getcol != 2){
                        document.getElementById(event.dest.nodesScope.list2[i].id+'_col').value = 2;
                    }
                }  
                for(i=0; i< event.dest.nodesScope.list2.length ;i++ ){
                      document.getElementById(event.dest.nodesScope.list2[i].id+'_row').value = i;
                } 
            }else{
                for(var i = 0; i<event.dest.nodesScope.list1.length ;i++){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col').value = 1;
                }
                for(var j = 0; j<event.dest.nodesScope.list1.length ;j++){
                 document.getElementById(event.dest.nodesScope.list1[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.list2.length ;i++){
                    document.getElementById(event.dest.nodesScope.list2[i].id+'_col').value = 2;
                }
                for(var j = 0; j<event.dest.nodesScope.list2.length ;j++){
                 document.getElementById(event.dest.nodesScope.list2[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.list3.length ;i++){
                    document.getElementById(event.dest.nodesScope.list3[i].id+'_col').value = 3;
                }
                for(var j = 0; j<event.dest.nodesScope.list3.length ;j++){
                 document.getElementById(event.dest.nodesScope.list3[j].id+'_row').value = j;
                }
            }
        }
        
    }
    // COLUMN 3 ITEMS LAYOUT->3-COLUMN
    $scope.options_list3 = {      
        dropped: function(event){
            if(event.dest.nodesScope.isParent(event.source.nodeScope)){
                for(i=0; i< event.dest.nodesScope.list3.length ;i++ ){                
                    var getcol = document.getElementById(event.dest.nodesScope.list3[i].id+'_col').value
                    if(getcol != 3){
                        document.getElementById(event.dest.nodesScope.list3[i].id+'_col').value = 3;
                    }
                }            
                for(i=0; i< event.dest.nodesScope.list3.length ;i++ ){
                      document.getElementById(event.dest.nodesScope.list3[i].id+'_row').value = i;                  
                } 
            }else{
                for(var i = 0; i<event.dest.nodesScope.list1.length ;i++){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col').value = 1;
                }
                for(var j = 0; j<event.dest.nodesScope.list1.length ;j++){
                 document.getElementById(event.dest.nodesScope.list1[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.list2.length ;i++){
                    document.getElementById(event.dest.nodesScope.list2[i].id+'_col').value = 2;
                }
                for(var j = 0; j<event.dest.nodesScope.list2.length ;j++){
                 document.getElementById(event.dest.nodesScope.list2[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.list3.length ;i++){
                    document.getElementById(event.dest.nodesScope.list3[i].id+'_col').value = 3;
                }
                for(var j = 0; j<event.dest.nodesScope.list3.length ;j++){
                 document.getElementById(event.dest.nodesScope.list3[j].id+'_row').value = j;
                }
            }
        }        
    }
    // COLUMN UPPER ITEMS LAYOUT->2-COLUMN
    $scope.options_list4 = {      
        dropped: function(event){
            
            if(event.dest.nodesScope.isParent(event.source.nodeScope)){
               for(i=0; i< event.dest.nodesScope.upper_column.length ;i++ ){                
                    var getcolIns = document.getElementById(event.dest.nodesScope.upper_column[i].id+'_col_inside').value
                    if(getcolIns != 2){
                        document.getElementById(event.dest.nodesScope.upper_column[i].id+'_col_inside').value = 2;
                    }
                }  
                for(i=0; i< event.dest.nodesScope.upper_column.length ;i++ ){
                      document.getElementById(event.dest.nodesScope.upper_column[i].id+'_row').value = i;
                } 
            }else{
                for(var i = 0; i<event.dest.nodesScope.upper_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.upper_column[i].id+'_col_inside').value = 2;
                }
                for(var j = 0; j<event.dest.nodesScope.upper_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.upper_column[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.column_inside_left.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col_inside').value = 3;
                }
                for(var i = 0; i<event.dest.nodesScope.column_inside_left.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col').value = i;
                }
                for(var j = 0; j<event.dest.nodesScope.column_inside_left.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_left[j].id+'_row').value = j;
                } 
                
                for(var i = 0; i<event.dest.nodesScope.column_inside_right.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value = 5;
                }
                for(var j = 0; j<event.dest.nodesScope.column_inside_right.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_right[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.lower_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.lower_column[i].id+'_col_inside').value = 4;
                }
                for(var j = 0; j<event.dest.nodesScope.lower_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.lower_column[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.list1.length ;i++){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col_inside').value = 1;
                }
                for(var j = 0; j<event.dest.nodesScope.list1.length ;j++){
                 document.getElementById(event.dest.nodesScope.list1[j].id+'_row').value = j;
                }
            }
        }          
    }
    // COLUMN INSIDE LEFT ITEMS LAYOUT->2-COLUMN
    $scope.options_list5 = {  
        dropped: function(event){
            
            if(event.dest.nodesScope.isParent(event.source.nodeScope)){
               for(i=0; i< event.dest.nodesScope.column_inside_left.length ;i++ ){                
                    var getcolIns = document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col_inside').value
                    if(getcolIns != 3){
                        document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col_inside').value = 3;
                    }
                }  
                for(i=0; i< event.dest.nodesScope.column_inside_left.length ;i++ ){
                      document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_row').value = i;
                  } 
            }else{
                for(var i = 0; i<event.dest.nodesScope.upper_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.upper_column[i].id+'_col_inside').value = 2;
                }
                for(var j = 0; j<event.dest.nodesScope.upper_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.upper_column[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.column_inside_left.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col_inside').value = 3;
                }
                for(var i = 0; i<event.dest.nodesScope.column_inside_left.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col').value = i;
                }
                for(var j = 0; j<event.dest.nodesScope.column_inside_left.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_left[j].id+'_row').value = j;
                } 
                
                for(var i = 0; i<event.dest.nodesScope.column_inside_right.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value = 5;
                }
                for(var j = 0; j<event.dest.nodesScope.column_inside_right.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_right[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.lower_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.lower_column[i].id+'_col_inside').value = 4;
                }
                for(var j = 0; j<event.dest.nodesScope.lower_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.lower_column[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.list1.length ;i++){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col_inside').value = 1;
                }
                for(var j = 0; j<event.dest.nodesScope.list1.length ;j++){
                 document.getElementById(event.dest.nodesScope.list1[j].id+'_row').value = j;
                }
            }
        } 
    }
    // COLUMN INSIDE RIGHT ITEMS LAYOUT->2-COLUMN
    $scope.options_list6 = {   
        dropped: function(event){
            
            if(event.dest.nodesScope.isParent(event.source.nodeScope)){
               for(i=0; i< event.dest.nodesScope.column_inside_right.length ;i++ ){                
                var getcolIns = document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value
                if(getcolIns != 5){
                    document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value = 5;
                }
            } 
            for(i=0; i< event.dest.nodesScope.column_inside_right.length ;i++ ){
                  document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_row').value = i;
              } 
            }else{
                for(var i = 0; i<event.dest.nodesScope.upper_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.upper_column[i].id+'_col_inside').value = 2;
                }
                for(var j = 0; j<event.dest.nodesScope.upper_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.upper_column[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.column_inside_left.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col_inside').value = 3;
                }
                for(var i = 0; i<event.dest.nodesScope.column_inside_left.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col').value = i;
                }
                for(var j = 0; j<event.dest.nodesScope.column_inside_left.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_left[j].id+'_row').value = j;
                } 
                
                for(var i = 0; i<event.dest.nodesScope.column_inside_right.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value = 5;
                }
                for(var j = 0; j<event.dest.nodesScope.column_inside_right.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_right[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.lower_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.lower_column[i].id+'_col_inside').value = 4;
                }
                for(var j = 0; j<event.dest.nodesScope.lower_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.lower_column[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.list1.length ;i++){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col_inside').value = 1;
                }
                for(var j = 0; j<event.dest.nodesScope.list1.length ;j++){
                 document.getElementById(event.dest.nodesScope.list1[j].id+'_row').value = j;
                }
            }
        }
        
    }
    // COLUMN LOWER ITEMS LAYOUT->2-COLUMN
    $scope.options_list7 = {      
        dropped: function(event){
            
            if(event.dest.nodesScope.isParent(event.source.nodeScope)){
               for(i=0; i< event.dest.nodesScope.lower_column.length ;i++ ){                
                var getcolIns = document.getElementById(event.dest.nodesScope.lower_column[i].id+'_col_inside').value
                if(getcolIns != 4){
                    document.getElementById(event.dest.nodesScope.lower_column[i].id+'_col_inside').value = 4;
                }
            } 
           for(i=0; i< event.dest.nodesScope.lower_column.length ;i++ ){
                  event.dest.nodesScope.getElementById(event.dest.nodesScope.lower_column[i].id+'_row').value = i;
              } 
            }else{
                for(var i = 0; i<event.dest.nodesScope.upper_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.upper_column[i].id+'_col_inside').value = 2;
                }
                for(var j = 0; j<event.dest.nodesScope.upper_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.upper_column[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.column_inside_left.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col_inside').value = 3;
                }
                for(var j = 0; j<event.dest.nodesScope.column_inside_left.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_left[j].id+'_row').value = j;
                } 
                
                for(var i = 0; i<event.dest.nodesScope.column_inside_right.length ;i++){
                    document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value = 5;
                }
                for(var j = 0; j<event.dest.nodesScope.column_inside_right.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_right[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.lower_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.lower_column[i].id+'_col_inside').value = 4;
                }
                for(var j = 0; j<event.dest.nodesScope.lower_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.lower_column[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.list1.length ;i++){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col_inside').value = 1;
                }
                for(var j = 0; j<event.dest.nodesScope.list1.length ;j++){
                 document.getElementById(event.dest.nodesScope.list1[j].id+'_row').value = j;
                }
            }
        }
        
    }
    // COLUMN 1 ITEMS LAYOUT->2-COLUMN
    $scope.options_list8 = {      
        dropped: function(event){
            
            if(event.dest.nodesScope.isParent(event.source.nodeScope)){
               for(i=0; i< event.dest.nodesScope.list1.length ;i++ ){                
                var getcolIns = document.getElementById(event.dest.nodesScope.list1[i].id+'_col_inside').value
                if(getcolIns != 1){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col_inside').value = 1;
                }
            } 
            for(i=0; i< event.dest.nodesScope.list1.length ;i++ ){
                  document.getElementById(event.dest.nodesScope.list1[i].id+'_row').value = i;
              } 
            }else{
                for(var i = 0; i<event.dest.nodesScope.upper_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.upper_column[i].id+'_col_inside').value = 2;
                }
                for(var j = 0; j<event.dest.nodesScope.upper_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.upper_column[j].id+'_row').value = j;
                } 
                for(var i = 0; i<event.dest.nodesScope.column_inside_left.length ;i++){
//                    alert(event.dest.nodesScope.column_inside_left[i].id+'_col_inside');
                    
                    document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col_inside').value = 3;
                    
//                    alert(document.getElementById(event.dest.nodesScope.column_inside_left[i].id+'_col_inside').value);
                }                
                for(var j = 0; j<event.dest.nodesScope.column_inside_left.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_left[j].id+'_row').value = j;
                }                 
                for(var i = 0; i<event.dest.nodesScope.column_inside_right.length ;i++){
                    alert(document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value);
                    document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value = 5;
                    alert(document.getElementById(event.dest.nodesScope.column_inside_right[i].id+'_col_inside').value);
                }                
                for(var j = 0; j<event.dest.nodesScope.column_inside_right.length ;j++){
                 document.getElementById(event.dest.nodesScope.column_inside_right[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.lower_column.length ;i++){
                    document.getElementById(event.dest.nodesScope.lower_column[i].id+'_col_inside').value = 4;
                }
                for(var j = 0; j<event.dest.nodesScope.lower_column.length ;j++){
                 document.getElementById(event.dest.nodesScope.lower_column[j].id+'_row').value = j;
                }
                for(var i = 0; i<event.dest.nodesScope.list1.length ;i++){
                    document.getElementById(event.dest.nodesScope.list1[i].id+'_col_inside').value = 1;
                }
                for(var j = 0; j<event.dest.nodesScope.list1.length ;j++){
                 document.getElementById(event.dest.nodesScope.list1[j].id+'_row').value = j;
                }
            }
        }
    }
    // ALL ITEM IN DESIGN DRAG DROP
    $scope.all = [    
    {
      "id": 1,
      "title": "<?php echo $this->__('Login'); ?>",
      "content":"<?php echo $this->__('Login option like guest, registered and Facebook-Google API\'s.'); ?>",
      "name":"login",
      "layout_name":"<?php echo $layout_name; ?>",
      "col_data":"<?php echo $settings['step']['login'][$layout_name]['column']; ?>",
      "row_data":"<?php echo $settings['step']['login'][$layout_name]['row']; ?>",
      "col_inside_data":"<?php echo $settings['step']['login'][$layout_name]['column-inside']; ?>",
      "attributes":false,
      "data":"login",
      "show":true
    }, {
      "id": 2,
      "title": "<?php echo $this->__('Payment Address'); ?>",
      "content":"<?php echo $this->__('Customer information and payment address.'); ?>",
      "name":"payment_address",
      "layout_name":"<?php echo $layout_name; ?>",
      "col_data":"<?php echo $settings['step']['payment_address'][$layout_name]['column']; ?>",
      "row_data":"<?php echo $settings['step']['payment_address'][$layout_name]['row']; ?>",
      "col_inside_data":"<?php echo $settings['step']['payment_address'][$layout_name]['column-inside']; ?>",
      "attributes":false,
      "data":"payment_address",
      "show":true
    },{
      "id": 3,
      "title": "<?php echo $this->__('Shipping Address'); ?>",
      "content":"<?php echo $this->__('Extra address for shipping purposes.'); ?>",
      "name":"shipping_address",
      "layout_name":"<?php echo $layout_name; ?>",
      "col_data":"<?php echo $settings['step']['shipping_address'][$layout_name]['column']; ?>",
      "row_data":"<?php echo $settings['step']['shipping_address'][$layout_name]['row']; ?>",
      "col_inside_data":"<?php echo $settings['step']['shipping_address'][$layout_name]['column-inside']; ?>",
      "attributes":false,
      "data":"shipping_address",
      "show":true

    },{
      "id": 4,
      "title": "<?php echo $this->__('Shipping Method'); ?>",
      "content":"<?php echo $this->__('Customer information and payment address.'); ?>",
      "name":"shipping_method",
      "layout_name":"<?php echo $layout_name; ?>",
      "col_data":"<?php echo $settings['step']['shipping_method'][$layout_name]['column']; ?>",
      "row_data":"<?php echo $settings['step']['shipping_method'][$layout_name]['row']; ?>",
      "col_inside_data":"<?php echo $settings['step']['shipping_method'][$layout_name]['column-inside']; ?>",
      "attributes":false,
      "data":"shipping_method",
      "show":true
    }, {
      "id": 5,
      "title": "<?php echo $this->__('Payment Method'); ?>",
      "content":"<?php echo $this->__('Customer information and payment address.'); ?>",
      "name":"payment_method",
      "layout_name":"<?php echo $layout_name; ?>",
      "col_data":"<?php echo $settings['step']['payment_method'][$layout_name]['column']; ?>",
      "row_data":"<?php echo $settings['step']['payment_method'][$layout_name]['row']; ?>",
      "col_inside_data":"<?php echo $settings['step']['payment_method'][$layout_name]['column-inside']; ?>",
      "attributes":false,
      "data":"payment_method",
      "show":true
    },{
      "id": 6,
      "title": "<?php echo $this->__('Cart'); ?>",
      "content":"<?php echo $this->__('Customer information and payment address.'); ?>",
      "name":"cart",
      "layout_name":"<?php echo $layout_name; ?>",
      "col_data":"<?php echo $settings['step']['cart'][$layout_name]['column']; ?>",
      "row_data":"<?php echo $settings['step']['cart'][$layout_name]['row']; ?>",
      "col_inside_data":"<?php echo $settings['step']['cart'][$layout_name]['column-inside']; ?>",
      "attributes":false,
      "data":"cart",
      "show":true
    }, {
      "id": 7,
      "title": "<?php echo $this->__('Confirm'); ?>",
      "content":"<?php echo $this->__('Customer information and payment address.'); ?>",
      "name":"confirm",
      "layout_name":"<?php echo $layout_name; ?>",
      "col_data":"<?php echo $settings['step']['confirm'][$layout_name]['column']; ?>",
      "row_data":"<?php echo $settings['step']['confirm'][$layout_name]['row']; ?>",
      "col_inside_data":"<?php echo $settings['step']['confirm'][$layout_name]['column-inside']; ?>",
      "attributes":false,
      "data":"confirm",
      "show":true
    },
         //FOR SETTING HTML CONTENT MULTIPLE    
    <?php $p = 8; foreach($settings['step']['html'] as $k=>$v){ ?>
    
        {
          "id": <?php echo $p; ?>,
          "title": "<?php echo $this->__('Html Content'); ?>",
          "content":"",
          "name":"html",
          "layout_name":"<?php echo $layout_name; ?>",
          "col_data":"<?php echo $settings['step']['html'][$k][$layout_name]['column']; ?>",
          "row_data":"<?php echo $settings['step']['html'][$k][$layout_name]['row']; ?>",
          "col_inside_data":"<?php echo $settings['step']['html'][$k][$layout_name]['column-inside']; ?>",
          "attributes":true,
          "data":"<?php echo $k; ?>",
          "show":true
        },        
    <?php $p++; } ?>
    ];
    <?php if($layout_name == 'three-column'){ ?>
    $scope.list1 = [];
    $scope.list2 = [];
    $scope.list3 = [];
    var sortRows1 = [];
    var sortRows2 = [];
    var sortRows3 = [];
    for(var i = 0; i < <?php echo $p-1; ?>; i++){ 
        if($scope.all[i].col_data ==1){
            sortRows1.push([ 1 * $scope.all[i].row_data , $scope.all[i] ]);
        }else if($scope.all[i].col_data ==2){
            sortRows2.push([ 1 * $scope.all[i].row_data , $scope.all[i] ]);
        }else if($scope.all[i].col_data ==3){
            sortRows3.push([ 1 * $scope.all[i].row_data , $scope.all[i] ]);
        }
        
    }
     sortRows1.sort(function(x, y) {
        return x[0] - y[0];
    });
    sortRows2.sort(function(x, y) {
        return x[0] - y[0];
    });
    sortRows3.sort(function(x, y) {
        return x[0] - y[0];
    });
    for (var i=0; i<sortRows1.length; i++) {
        $scope.list1.push(sortRows1[i][1]);
    }
    for (var i=0; i<sortRows2.length; i++) {
        $scope.list2.push(sortRows2[i][1]);
    }
    for (var i=0; i<sortRows3.length; i++) {
        $scope.list3.push(sortRows3[i][1]);
    }
    <?php }elseif($layout_name == 'two-column'){ ?>
        $scope.list1 = [];
        $scope.upper_column = [];
        $scope.lower_column = [];
        $scope.column_inside_left = [];
        $scope.column_inside_right = [];
        var sortRows1 = [];
        var sortRows2 = [];
        var sortRows3 = [];
        var sortRows4 = [];
        var sortRows5 = [];
        for(var i = 0; i < <?php echo $p-1; ?>; i++){ 
            if($scope.all[i].col_inside_data ==1){
                sortRows1.push([ 1 * $scope.all[i].row_data , $scope.all[i] ]);
            }else if($scope.all[i].col_inside_data ==2){
                sortRows2.push([ 1 * $scope.all[i].row_data , $scope.all[i] ]);
            }else if($scope.all[i].col_inside_data ==3){
//                if($scope.all[i].col_data ==1){
                    sortRows3.push([ 1 * $scope.all[i].row_data , $scope.all[i] ]);
//                }else if($scope.all[i].col_data ==2){
                    
//                }
            }else if($scope.all[i].col_inside_data ==5){
                sortRows4.push([ 1 * $scope.all[i].row_data , $scope.all[i] ]);
            }else if($scope.all[i].col_inside_data ==4){
                sortRows5.push([ 1 * $scope.all[i].row_data , $scope.all[i] ]);
            }        
        }
        sortRows1.sort(function(x, y) {
            return x[0] - y[0];
        });
        sortRows2.sort(function(x, y) {
            return x[0] - y[0];
        });
        sortRows3.sort(function(x, y) {
            return x[0] - y[0];
        });
        sortRows4.sort(function(x, y) {
            return x[0] - y[0];
        });
        sortRows5.sort(function(x, y) {
            return x[0] - y[0];
        });
        for (var i=0; i<sortRows1.length; i++) {
            $scope.list1.push(sortRows1[i][1]);
        }
        for (var i=0; i<sortRows2.length; i++) {
            $scope.upper_column.push(sortRows2[i][1]);
        }
        for (var i=0; i<sortRows3.length; i++) {
            $scope.column_inside_left.push(sortRows3[i][1]);
        }
        for (var i=0; i<sortRows4.length; i++) {
            $scope.column_inside_right.push(sortRows4[i][1]);
        }
        for (var i=0; i<sortRows5.length; i++) {
            $scope.lower_column.push(sortRows5[i][1]);
        }
    <?php } ?>
    $scope.toggle = function(scope) {
      scope.collapsed = !scope.collapsed;
    };
    $scope.remove = function(scope) {
      scope.removeItem();
      var index = scope.$index;
      if (index > -1) {
        scope.sortableModelValue.splice(index, 1)[0];
      }
    }; 
    
  });

})();
//CONTROLLER TO HANDLE HTML CONTENT MODAL
app.controller('ModalHTMLcontentCtrl',function ($scope, $modal, $log) {
  $scope.open = function (event) {
      var id = event.target.id;
      var data = angular.element( document.querySelector('#'+ id  ) ).attr('data')
    var modalInstance = $modal.open({
      templateUrl: 'myModalContent.html',
      controller: ModalInstanceHTMLCtrl,
      resolve: {
        stored_value: function () {
            if(angular.element( document.querySelector( '#modals-bootbox-prompt_h_'+ data  ) ).val() != ""){
                var stored_value = angular.element( document.querySelector( '#modals-bootbox-prompt_h_'+ data  ) ).val();
                
            }else{
                var stored_value="";
            }
            return stored_value;
        },
        element_id:function(){
          return data  ;
        }
              
      }
    });
  };
});
var ModalInstanceHTMLCtrl = function ($scope, $modalInstance, stored_value,element_id) {

  $scope.stored_value = stored_value;
  $scope.element_id = element_id;


  $scope.ok = function () {
      var html_string=angular.element(document.querySelector('#text_area_html')).val();
      
            angular.element(document.querySelector('#modals-bootbox-prompt_h_'+ element_id)).val(html_string);
    $modalInstance.close();
  };

  $scope.cancel = function () {
    $modalInstance.dismiss('cancel');
  };
};
</script>

<div id="ng-app" ng-app="supercheckout" ng-init="tab = 'confirm'">
    <input type="hidden" id="storage_id" value ="<?php echo $p; ?>">
    <div ng-controller="drag_and_drop" class="supercheckout-admin-container menu-left">
        <div id="breadcrumb" scroll class="breadcrumb {{booladdClass}} <?php if ($success_msg) { echo ' saved';} ?>" >
                <div class="layout" style="display:inline-block;font-size: 25px;font-weight: bold;padding:10px;">
                        <?php echo $this->__('SuperCheckout'); ?> <?php echo $this->__('v0.2'); ?><?php //echo 'SuperCheckout v0.1'; ?>
                </div>
                <?php if (isset($success_msg) && $success_msg) { ?>
                <div class="layout2" style="font-size: 25px;font-weight: bold;padding:10px;">
                    <?php echo $success_msg; ?>
                </div>
                <?php }
                
                ?>                

                <div id="tooltip_enable" class="vel-fr vel-mr10">
                    <input class="btn btn-warning pull-right vel-mt10" type="button" value="<?php echo $this->__('Cancel'); ?>" onclick="$('#form').submit();">
                </div>
<!--                <div id="tooltip_enable" class="vel-fr vel-mr10">
                    <input class="btn btn-warning pull-right vel-mt10" type="button" value="<?php echo 'Save and Stay'; ?>" ng-click="SaveAndStay($event)">                    
                </div> -->
                <div id="tooltip_enable" class="vel-fr vel-mr10">
                    <input class="btn btn-warning pull-right vel-mt10" type="button" value="<?php echo $this->__('Save & Continue'); ?>" onClick="$('form').submit();">
                </div>                
                <div id="storesSelectBox" class="row vel-mr10 vel-fr vel-pt10">                    
                   
                    <select id="store_switcher" name="store_switcher" class="system-config-store-switcher chosen-select" onchange="location.href=this.options[this.selectedIndex].getAttribute('url')">
                        <?php foreach ($this->getStoreSelectOptions() as $_value => $_option): ?>
                            <?php if (isset($_option['is_group'])){ ?>
                                <?php if ($_option['is_close']){ ?>
                                    </optgroup>
                                <?php }else{ ?>
                                    <optgroup label="<?php echo $this->escapeHtml($_option['label']) ?>" style="<?php echo $_option['style'] ?>">
                                    <?php } ?>
                                    <?php continue; ?>
                                <?php } ?>
                                <option value="<?php echo $this->escapeHtml($_value) ?>" url="<?php echo $_option['url'] ?>" <?php echo $_option['selected'] ? 'selected="selected"' : '' ?> style="<?php echo $_option['style'] ?>">
                                    <?php echo $this->escapeHtml($_option['label']) ?>
                                </option>
                            <?php endforeach ?>
                    </select>

                </div>
                <div id="tooltip_enable" class="vel-fr vel-mr10 vel-dn">
                    <input class="btn btn-warning pull-right vel-mt10" type="button" value="<?php echo $this->__('Reset'); ?>" ng-Click="resetall();">
                </div> 

                <div class="vel-clearfix"></div>
            </div>
        <!-- Top navbar -->

        
        <div id="wrapper">
            <!-- Sidebar Menu -->
            <div id="menuVel" class="hidden-sm hidden-print">
                <!-- Scrollable menu wrapper with Maximum height -->
                <div class="slim-scroll" data-scroll-height="800px">
                    <!-- Regular Size Menu -->
                    <ul id="supercheckout-tabs">
                        <!-- Menu Regular Item -->
                        <li class="glyphicons settings active" ng-click="tab = 'general'"><a href="#"><i></i><span><?php echo $this->__('General Settings'); ?></span></a></li>
                        <li class="glyphicons keys " ng-click="tab = 'login'" ><a href="#"><i></i><span><?php echo $this->__('Login Settings'); ?></span></a></li>
                        <li class="glyphicons home" ng-click="tab = 'payment_address'"><a href="#"><i></i><span><?php echo $this->__('Payment Address'); ?></span></a></li>
                        <li class="glyphicons home" ng-click="tab = 'shipping_address'"><a href="#"><i></i><span><?php echo $this->__('Shipping Address'); ?></span></a></li>
                        <li class="glyphicons cargo" ng-click="tab = 'shipping_method'"><a href="#"><i></i><span><?php echo $this->__('Shipping Method'); ?></span></a></li>
                        <li class="glyphicons credit_card" ng-click="tab = 'payment_method'"><a href="#"><i></i><span><?php echo $this->__('Payment Method'); ?></span></a></li>
                        <li class="glyphicons ok_2" ng-click="tab = 'confirm'"><a href="#"><i></i><span><?php echo $this->__('Confirm & Cart'); ?></span></a></li>
                        <li id="design_tab" class="glyphicons fabric " ng-click="tab = 'design'"><a href="#" id="design_tab_anchor"><i></i><span><?php echo $this->__('Design'); ?></span></a></li>                            
                        <li class="glyphicons shopping_cart" ng-click="tab = 'ajax_cart'"><a href="#"><i></i><span><?php echo $this->__('Cart Popup'); ?></span></a></li>
                        <!--<li class="glyphicons anchor"><a href="https://velsof1.zendesk.com/hc/en-us/requests/new" target="_blank"><i></i><span><?php // echo $this->__('Get Support'); ?></span></a></li>-->
                        <!-- // Menu Regular Items END -->
                    </ul>
                    <div class="clearfix"></div>
                    <div class="separator bottom"></div>
                    <!-- // Regular Size Menu END -->

                    <!-- Menu Position Change -->
                    <div class="separator top uniformjs menu_js hidden-sm">
                        <div class="innerLR">
                            <label for="toggle-menu-position" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>">
                                <input type="checkbox" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" id="toggle-menu-position" /> 
                                right menu
                            </label>
                        </div>
                    </div>
                    <!-- // Menu Position Change END -->                      
                </div>
                <!-- // Scrollable Menu wrapper with Maximum Height END -->
            </div>
            <div id="content">
                <div>
                    <div class="layout">                        
                <div ng-controller="ModalHTMLcontentCtrl"> 
                    <!-- 960px -->
                    <div class="content tabs" style="/*padding:0 50px;*/">
                        <form action="<?php echo $this->getFormAction(); ?>" method="post" enctype="multipart/form-data" id="form">
                            <input type="hidden" name="form_key" value="<?php echo $this->getFormKey(); ?>" />
                            <input type="hidden" name="scope" value="<?php echo $store_data['scope']; ?>" />
                            <input type="hidden" name="scope_id" value="<?php echo $store_data['scope_id']; ?>" />
                            <div class="layout">                                    
                                    <div class="tab-content even-height">
                                                
                                    <!---------------------------------- General ---------------------------------->
                                    <div ng-show="tab == 'general'">
                                        <h3 class="heading-mosaic"><?php echo $this->__('General Settings'); ?></h3>
                                        <div class="block">
                                            <table class="table table-bordered table-striped">
                                                <tr>
                                                    <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span class="<?php if($browser_used_ie == false){echo 'control-label-relative'; } ?>  control-label"><?php echo $this->__('Enable Supercheckout '); ?></span>                                                                
                                                        <i class="icon-question-sign <?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> " data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('Enable or disable Super Checkout. Replace the main checkout with the Super Checkout.');; ?>"></i>                                                        
                                                    </td>
                                                    <td class="settings "><input type="hidden"value="0" name="supercheckout[general][enable]" />
                                                        <?php if(isset($settings['general']['enable']) && $settings['general']['enable'] == 1){ ?>
                                                        <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?> >
                                                            <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?> type="checkbox" value="1" name="supercheckout[general][enable]" id="checkout_enable" checked="checked" />
                                                            <?php if($browser_used_ie==false){ ?>
                                                            <label class="onoffswitch-label" for="checkout_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                            </label>
                                                            <?php } ?>
                                                        </div>
                                                        <?php } else { ?>
                                                        <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?> >
                                                            <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?> type="checkbox" value="1" name="supercheckout[general][enable]" id="checkout_enable" />
                                                            <?php if($browser_used_ie==false){ ?>
                                                            <label class="onoffswitch-label" for="checkout_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                            </label>
                                                            <?php } ?>
                                                        </div>
                                                        <?php } ?> 
                                                                
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                <td class="vel-tar vel-va vel-font-family vel-wid-per-30">
                                                    <span class="control-label <?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> "><?php echo $this->__('Guest Registration '); ?></span>
                                                    <i class="icon-question-sign <?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> " data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('Enable registration for guest checkout. This will automatically send a password to the user for further use of account'); ?>"></i>
                                                </td>
                                                <td class="settings ">
                                                    <input type="hidden" value="0" name="supercheckout[general][guestenable]" />
                                                    <?php if(isset($settings['general']['guestenable']) && $settings['general']['guestenable'] == 1){ ?>
                                                    <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                        <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[general][guestenable]" id="guest_registration_enable" checked="checked" />
                                                        <?php if($browser_used_ie==false){ ?>
                                                        <label class="onoffswitch-label" for="guest_registration_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                        </label>
                                                        <?php } ?>
                                                    </div>
                                                    <?php } else { ?>
                                                    <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                        <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[general][guestenable]" id="guest_registration_enable" />
                                                        <?php if($browser_used_ie==false){ ?>
                                                        <label class="onoffswitch-label" for="guest_registration_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                        </label>
                                                        <?php } ?>
                                                    </div>
                                                    <?php } ?>                    
                                                </td>  
                                                <tr>
                                                <td class="vel-tar vel-va vel-font-family vel-wid-per-30">
                                                    <span class="control-label <?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> "><?php echo $this->__('Register guest with password'); ?></span>
                                                    <i class="icon-question-sign <?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> " data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('This will give password fields where user can enter their own password to register'); ?>"></i>
                                                </td>
                                                <td class="settings ">
                                                    <input type="hidden" value="0" name="supercheckout[general][guest_manual]" />
                                                    <?php if(isset($settings['general']['guest_manual']) && $settings['general']['guest_manual'] == 1){ ?>
                                                    <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                        <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[general][guest_manual]" id="manual_registration_enable" checked="checked" />
                                                        <?php if($browser_used_ie==false){ ?>
                                                        <label class="onoffswitch-label" for="manual_registration_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                        </label>
                                                        <?php } ?>
                                                    </div>
                                                    <?php } else { ?>
                                                    <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                        <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[general][guest_manual]" id="manual_registration_enable" />
                                                        <?php if($browser_used_ie==false){ ?>
                                                        <label class="onoffswitch-label" for="manual_registration_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                        </label>
                                                        <?php } ?>
                                                    </div>
                                                    <?php } ?>                    
                                                </td>                                                            
                                            </tr> 
                                                <tr>
                                                <td class="vel-tar vel-va vel-font-family vel-wid-per-30">
                                                    <span><?php echo $this->__('Select default option at checkout: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('Set the default option for the visitor - it can be guest checkout or login'); ?>"></i>
                                                </td>
                                                <td class="settings">
                                                    
                                                    <?php if(isset($settings['general']['default_option']) && $settings['general']['default_option'] == 'guest'){ ?>
                                                    <div class="widget-body uniformjs">
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="guest" name="supercheckout[general][default_option]" checked="checked" id="general_default_option_guest" /><label  for="general_default_option_guest"><?php echo $this->__('Guest'); ?></label>
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="register" name="supercheckout[general][default_option]"   id="general_default_option_register" /><label  for="general_default_option_register"><?php echo $this->__('Login'); ?></label>
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="register_manual" name="supercheckout[general][default_option]"   id="general_default_option_register_manual" /><label  for="general_default_option_register_manual"><?php echo $this->__('Register'); ?></label>
                                                    </div>
                                                    <?php }elseif(isset($settings['general']['default_option']) && $settings['general']['default_option'] == 'register'){ ?>
                                                    <div class="widget-body uniformjs">
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="guest" name="supercheckout[general][default_option]"  id="general_default_option_guest" /><label  for="general_default_option_guest"><?php echo $this->__('Guest'); ?></label>
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="register" name="supercheckout[general][default_option]" checked="checked"   id="general_default_option_register" /><label  for="general_default_option_register"><?php echo $this->__('Login'); ?></label>
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="register_manual" name="supercheckout[general][default_option]"   id="general_default_option_register_manual" /><label  for="general_default_option_register_manual"><?php echo $this->__('Register'); ?></label>
                                                    </div>
                                                    <?php }else{ ?>
                                                    <div class="widget-body uniformjs">
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="guest" name="supercheckout[general][default_option]"  id="general_default_option_guest" /><label  for="general_default_option_guest"><?php echo $this->__('Guest'); ?></label>
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="register" name="supercheckout[general][default_option]" id="general_default_option_register" /><label  for="general_default_option_register"><?php echo $this->__('Login'); ?></label>
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'radio';}?>" type="radio" value="register_manual" name="supercheckout[general][default_option]" checked="checked"   id="general_default_option_register_manual" /><label  for="general_default_option_register_manual"><?php echo $this->__('Register'); ?></label>
                                                    </div>
                                                    <?php } ?>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Enable Guest Checkout'); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('Show or hide the guest option that is in the login section of the checkout'); ?>"></i></td>
                                                <?php if($guest_checkout_enable){ ?>
                                                <td class="settings ">
                                                    <div class="widget-body uniformjs">
                                                        <input type="hidden" value="0" name="supercheckout[step][login][option][guest][display]" />
                                                        <?php if(isset($settings['step']['login']['option']['guest']['display']) && $settings['step']['login']['option']['guest']['display'] == 1){ ?>
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[step][login][option][guest][display]" checked="checked" id="step_login_option_guest_display"/>
                                                        <?php }else{ ?>
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[step][login][option][guest][display]" id="step_login_option_guest_display" />
                                                        <?php } ?>
                                                        <label for="step_login_option_guest_display"><?php echo $this->__('Show'); ?></label>
                                                    </div>
                                                </td>
                                                <?php }else{ ?>
                                                <td class="settings ">
                                                    <div class="widget-body uniformjs">
                                                        <input type="hidden" value="0" name="supercheckout[step][login][option][guest][display]" />
                                                        <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[step][login][option][guest][display]" disabled="disabled" id="step_login_option_guest_display" />
                                                        <label for="step_login_option_guest_display"><?php echo $this->__('Show'); ?></label>
                                                        <i class="store_disabled" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('Guest display is disabled from the store please enable it first!'); ?>"><span class="store_disabled_msg">Warning !</span></i>
                                                    </div>
                                                </td>
                                                <?php } ?>
                                            </tr>
                                            <tr>
                                                <td class="vel-tar vel-va vel-font-family vel-wid-per-30">
                                                    <span class="control-label <?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> "><?php echo $this->__('Enable Newsletter'); ?></span>
                                                    <i class="icon-question-sign <?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> " data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('This will give checkbox which user can select to subscribe themselves to store.'); ?>"></i>
                                                </td>
                                                <td class="settings ">
                                                    <input type="hidden" value="0" name="supercheckout[general][newsletter]" />
                                                    <?php if(isset($settings['general']['newsletter']) && $settings['general']['newsletter'] == 1){ ?>
                                                    <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                        <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[general][newsletter]" id="newsletter_enable" checked="checked" />
                                                        <?php if($browser_used_ie==false){ ?>
                                                        <label class="onoffswitch-label" for="newsletter_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                        </label>
                                                        <?php } ?>
                                                    </div>
                                                    <?php } else { ?>
                                                    <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                        <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[general][newsletter]" id="newsletter_enable" />
                                                        <?php if($browser_used_ie==false){ ?>
                                                        <label class="onoffswitch-label" for="newsletter_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                        </label>
                                                        <?php } ?>
                                                    </div>
                                                    <?php } ?>                    
                                                </td>                                                            
                                            </tr> 
                                            </table>
                                        </div>                
                                    </div>
                                    <!------------------------------------Login Options--------------------------->
                                    <div ng-show="tab == 'login'">
                                        <h3 class="heading-mosaic"><?php echo $this->__('Login Settings'); ?></h3>
                                         <div class="block">
                                                <table class="table table-bordered table-striped">
                                                    <tbody>

                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span class="<?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> "><?php echo $this->__('Enable Facebook Plugin: '); ?></span><i class="<?php if($browser_used_ie == false){echo 'control-label-relative'; } ?>  icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can display the login through Facebook step or hide it'); ?>"></i></td>
                                                            <td>
                                                                <input type="hidden" value="0" name="supercheckout[step][facebook_login][display]" />
                                                                <?php if(isset($settings['step']['facebook_login']['display']) && $settings['step']['facebook_login']['display'] == 1){ ?>
                                                                <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                                    <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[step][facebook_login][display]" checked="checked"  id="facebook_login_display" />
                                                                    <?php if($browser_used_ie==false){ ?>
                                                                    <label class="onoffswitch-label" for="facebook_login_display">
                                                                        <div class="onoffswitch-inner"></div>
                                                                        <div class="onoffswitch-switch"></div>
                                                                    </label>
                                                                    <?php } ?>
                                                                </div>
                                                                <?php }else{ ?>
                                                                <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                                    <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[step][facebook_login][display]"  id="facebook_login_display" />
                                                                    <?php if($browser_used_ie==false){ ?>
                                                                    <label class="onoffswitch-label" for="facebook_login_display">
                                                                        <div class="onoffswitch-inner"></div>
                                                                        <div class="onoffswitch-switch"></div>
                                                                    </label>
                                                                    <?php } ?>
                                                                </div>
                                                                <?php } ?>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Facebook App Id: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can get the app id from www.developer.facebook.com'); ?>"></i></td>
                                                            <td class="settings">
                                                                <div class="vel-wid-per-60">
                                                                <?php if(isset($settings['step']['facebook_login']['app_id']) && $settings['step']['facebook_login']['app_id'] != ""){ ?>
                                                                <input  type="text" class="input-sm form-control col-md-12" value="<?php echo $settings['step']['facebook_login']['app_id']; ?>" name="supercheckout[step][facebook_login][app_id]" id="facebook_login_app_id" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>"/>
                                                                <?php }else{ ?>
                                                                <input type="text" class="input-sm form-control col-md-12" value="" name="supercheckout[step][facebook_login][app_id]" id="facebook_login_app_id"/>
                                                                <?php } ?>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Facebook App Secret: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can get the Secret from www.developer.facebook.com'); ?>"></i></td>
                                                            <td class="settings">
                                                                <div class="vel-wid-per-60">
                                                                <?php if(isset($settings['step']['facebook_login']['app_secret']) && $settings['step']['facebook_login']['app_secret'] != ""){ ?>
                                                                <input  class="input-sm form-control col-md-12" type="text" value="<?php echo $settings['step']['facebook_login']['app_secret']; ?>" name="supercheckout[step][facebook_login][app_secret]" id="facebook_login_app_secret" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>"/>
                                                                <?php }else{ ?>
                                                                <input class="input-sm form-control col-md-12" type="text" value="" name="supercheckout[step][facebook_login][app_secret]" id="facebook_login_app_secret"/>
                                                                <?php } ?>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span class="<?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> "><?php echo $this->__('Enable Google Login '); ?></span><i class="<?php if($browser_used_ie == false){echo 'control-label-relative'; } ?>  icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can display the login through Google step or hide it '); ?>"></i></td>
                                                            <td>
                                                                <input type="hidden" value="0" name="supercheckout[step][google_login][display]" />
                                                                <?php if(isset($settings['step']['google_login']['display']) && $settings['step']['google_login']['display'] == 1){ ?>
                                                                <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                                    <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[step][google_login][display]" checked="checked"  id="google_login_display" />
                                                                    <?php if($browser_used_ie==false){ ?>
                                                                    <label class="onoffswitch-label" for="google_login_display">
                                                                        <div class="onoffswitch-inner"></div>
                                                                        <div class="onoffswitch-switch"></div>
                                                                    </label>
                                                                    <?php } ?>
                                                                </div>
                                                                <?php }else{ ?>
                                                                <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                                    <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[step][google_login][display]"  id="google_login_display" />
                                                                    <?php if($browser_used_ie==false){ ?>
                                                                    <label class="onoffswitch-label" for="google_login_display">
                                                                        <div class="onoffswitch-inner"></div>
                                                                        <div class="onoffswitch-switch"></div>
                                                                    </label>
                                                                    <?php } ?>
                                                                </div>
                                                                <?php } ?>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Google App Id: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can get the app id from https://code.google.com/apis/console/'); ?>"></i></td>
                                                            <td class="settings">
                                                                <div class="vel-wid-per-60">
                                                                <?php if(isset($settings['step']['google_login']['app_id']) && $settings['step']['google_login']['app_id'] != ""){ ?>
                                                                <input class="input-sm form-control col-md-12" type="text" value="<?php echo $settings['step']['google_login']['app_id']; ?>" name="supercheckout[step][google_login][app_id]" id="google_login_app_id" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>"/>
                                                                <?php }else{ ?>
                                                                <input class="input-sm form-control col-md-12" type="text" value="" name="supercheckout[step][google_login][app_id]" id="google_login_app_id"/>
                                                                <?php } ?>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Google Client Id: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can get the client id from https://code.google.com/apis/console/'); ?>"></i></td>
                                                            <td class="settings">
                                                                <div class="vel-wid-per-60">
                                                                <?php if(isset($settings['step']['google_login']['client_id']) && $settings['step']['google_login']['client_id'] != ""){ ?>
                                                                <input class="input-sm form-control col-md-12" type="text" value="<?php echo $settings['step']['google_login']['client_id']; ?>" name="supercheckout[step][google_login][client_id]" id="google_login_client_id" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>"/>
                                                                <?php }else{ ?>
                                                                <input class="input-sm form-control col-md-12" type="text" value="" name="supercheckout[step][google_login][client_id]" id="google_login_client_id"/>
                                                                <?php } ?>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Google App Secret: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can get the Secret from https://code.google.com/apis/console/'); ?>"></i></td>
                                                            <td class="settings">
                                                                <div class="vel-wid-per-60">
                                                                <?php if(isset($settings['step']['google_login']['app_secret']) && $settings['step']['google_login']['app_secret'] != ""){ ?>
                                                                <input class="input-sm form-control col-md-12" type="text" value="<?php echo $settings['step']['google_login']['app_secret']; ?>" name="supercheckout[step][google_login][app_secret]" id="google_login_app_secret" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>"/>
                                                                <?php }else{ ?>
                                                                <input class="input-sm form-control col-md-12" type="text" value="" name="supercheckout[step][google_login][app_secret]" id="google_login_app_secret"/>
                                                                <?php } ?>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                        </div>               
                                    </div>
                                    <!---------------------------------- Payment Address ---------------------------------->
                                    <div ng-show="tab == 'payment_address'">
                                        <h3 class="heading-mosaic"><?php echo $this->__('Payment Address'); ?></h3>
                                        <div class="block" id="payment_address_form">
                                             <ul class="form alternate">
                                                    <li>
                                                            
                                                            <span style="margin-left:30%; font-size:14px; font-weight:bold;" class="guest"><?php echo $this->__('Guest Customer'); ?></span>
                                                            <span style="margin-left:20%; font-size:14px; font-weight:bold;"class="login"><?php echo $this->__('Logged in Customer'); ?></span>
                                                            
                                                    </li>
                                             </ul>
                                            <ul ui-tree="payment_address_drag" ui-tree-nodes="" ng-model="payment_address_fieldss" >
                                                <li ng-repeat="add in payment_address_fieldss" id="field_ul_{{add.id}}" ui-tree-node="" id="payment_address_{{add.id}}_input" class="sort-item payment_fields payment_address_draggable" sort-data="{{add.sort_order}}">
                                                    <input type="hidden" name = "supercheckout[step][payment_address][fields][{{add.id}}][id]" value ="{{add.id}}">
                                                    <input type="hidden" name = "supercheckout[step][payment_address][fields][{{add.id}}][title]" value ="{{add.title}}">
                                                    <span style="width:30%; float:left;padding-right:50px;text-align:right;">{{add.title}}
                                                        <input  id="field_ul_{{add.id}}_text" class="sort" name="supercheckout[step][payment_address][fields][{{add.id}}][sort_order]" class="input-sm form-control col-md-12" type="text" value="{{add.sort_order}}"/>
                                                    </span>


                                                    <div style ="width:30%; float:left;" class="widget-body uniformjs">
                                                        <input ng-click="disableFunc($event)" ng-checked="{{add.display.guest==1}}" value="1"  class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" name="supercheckout[step][payment_address][fields][{{add.id}}][display][guest]" id="guest_payment_address_fields_{{add.id}}"/>
                                                        <label class="checkboxinline">
                                                            <?php echo $this->__('Show'); ?>
                                                        </label>
                                                <!--<input type="hidden" value="{{add.require}}" name="supercheckout[option][guest][payment_address][fields][{{add.id}}][require]" />-->

                                                        <input ng-disabled="add.display.guest!=1" ng-checked="{{add.require.guest==1}}" value="1" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox"  name="supercheckout[step][payment_address][fields][{{add.id}}][require][guest]" id="guest_payment_address_fields_{{add.id}}_require"/>
                                                        <label for="guest_payment_address_fields_{{add.id}}_require"><?php echo $this->__('Require'); ?></label>
                                                    </div>
                                                    <div style ="width:30%; float:left;" class="widget-body uniformjs">

                                                        <input ng-click="disableFunc($event)" ng-checked="{{add.display.login==1}}" value="1" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" name="supercheckout[step][payment_address][fields][{{add.id}}][display][login]" id="logged_payment_address_fields_{{add.id}}"/>
                                                        <label for="logged_payment_address_fields_{{add.id}}_display"><?php echo $this->__('Show'); ?></label>

                                                        <input ng-disabled="add.display.login!=1" ng-checked="{{add.require.login==1}}" value="1" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" name="supercheckout[step][payment_address][fields][{{add.id}}][require][login]" id="logged_payment_address_fields_{{add.id}}_require"/>
                                                        <label for="logged_payment_address_fields_{{add.id}}_require"><?php echo $this->__('Require'); ?></label>

                                                    </div>
                                                    <span class="reorder" ui-tree-handle>
                                                        <i class="icon-reorder"></i>
                                                    </span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!---------------------------------- Shipping Address ---------------------------------->
                                    <div ng-show="tab == 'shipping_address'">
                                        <h3 class="heading-mosaic"><?php echo $this->__('Shipping Address'); ?></h3>
                                         <div class="block" id="shipping_address_form">
                                             <ul class="form alternate">
                                                    <li>
                                                            
                                                            <span style="margin-left:30%; font-size:14px; font-weight:bold;" class="guest"><?php echo $this->__('Guest Customer'); ?></span>
                                                            <span style="margin-left:20%; font-size:14px; font-weight:bold;"class="login"><?php echo $this->__('Logged in Customer'); ?></span>
                                                            
                                                    </li>
                                             </ul>
                                             <style>
                                                 .payment_address_draggable{
                                                     background-color:#F5F5F5; box-shadow: 0 1px 3px #3B3B3B;margin-bottom:5px; 
                                                 }
                                             </style>
                                             <ul ui-tree="shipping_address_drag" ui-tree-nodes="" ng-model="shipping_address_fieldss" >
                                                 <li ng-repeat="add in shipping_address_fieldss" id="field_ul_{{add.id}}" ui-tree-node="" id="shipping_address_{{add.id}}_input" class="sort-item shipping_fields payment_address_draggable" sort-data="{{add.sort_order}}">
                                                     <input type="hidden" name = "supercheckout[step][shipping_address][fields][{{add.id}}][id]" value ="{{add.id}}">
                                                     <input type="hidden" name = "supercheckout[step][shipping_address][fields][{{add.id}}][title]" value ="{{add.title}}">
                                                     <span style="width:30%; float:left;padding-right:50px;text-align:right;">{{add.title}}
                                                         <input  id="field_ul_{{add.id}}_text_shipping" class="sort" name="supercheckout[step][shipping_address][fields][{{add.id}}][sort_order]" class="input-sm form-control col-md-12" type="text" value="{{add.sort_order}}"/>
                                                     </span>


                                                     <div style ="width:30%; float:left;" class="widget-body uniformjs">
                                                         <input ng-click="disableFunc($event)" ng-checked="{{add.display.guest==1}}" value="1" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" name="supercheckout[step][shipping_address][fields][{{add.id}}][display][guest]" id="guest_shipping_address_fields_{{add.id}}"/>
                                                         <label class="checkboxinline">
                                                             <?php echo $this->__('Show'); ?>
                                                         </label>
                                                 <!--<input type="hidden" value="{{add.require}}" name="supercheckout[option][guest][shipping_address][fields][{{add.id}}][require]" />-->

                                                         <input ng-disabled="add.display.login!=1" ng-checked="{{add.require.guest==1}}" value="1" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox"  name="supercheckout[step][shipping_address][fields][{{add.id}}][require][guest]" id="guest_shipping_address_fields_{{add.id}}_require"/>
                                                         <label for="guest_shipping_address_fields_{{add.id}}_require"><?php echo $this->__('Require'); ?></label>
                                                     </div>
                                                     <div style ="width:30%; float:left;" class="widget-body uniformjs">

                                                         <input ng-click="disableFunc($event)" ng-checked="{{add.display.login==1}}" value="1" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" name="supercheckout[step][shipping_address][fields][{{add.id}}][display][login]" id="logged_shipping_address_fields_{{add.id}}"/>
                                                         <label for="logged_shipping_address_fields_{{add.id}}_display"><?php echo $this->__('Show'); ?></label>

                                                         <input ng-disabled="add.display.login!=1" ng-checked="{{add.require.login==1}}" value="1" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" name="supercheckout[step][shipping_address][fields][{{add.id}}][require][login]" id="logged_shipping_address_fields_{{add.id}}_require"/>
                                                         <label for="logged_shipping_address_fields_{{add.id}}_require"><?php echo $this->__('Require'); ?></label>

                                                     </div>
                                                     <span class="reorder" ui-tree-handle >
                                                         <i class="icon-reorder"></i>
                                                     </span>
                                                 </li>
                                             </ul>
                                        </div>          
                                    </div>
                                    <!---------------------------------- Shipping Methods ---------------------------------->
                                    <div ng-show="tab == 'shipping_method'">
                                        <h3 class="heading-mosaic"><?php echo $this->__('Shipping Method'); ?></h3>
                                        <div class="block">
                                                <table class="table table-bordered table-striped">
                                                    <tbody>

                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span class="<?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> "><?php echo $this->__('Display Shipping Methods: '); ?></span><i class="<?php if($browser_used_ie == false){echo 'control-label-relative'; } ?>  icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can display the shipping step or hide it. you must still have at least one shipping method that will be selected by default'); ?>"></i></td>
                                                            <td>
                                                                <input type="hidden" value="0" name="supercheckout[step][shipping_method][display_options]" />
                                                                <?php if(isset($settings['step']['shipping_method']['display_options']) && $settings['step']['shipping_method']['display_options'] == 1){ ?>
                                                                <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                                    <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[step][shipping_method][display_options]" checked="checked"  id="shipping_method_display" />
                                                                    <?php if($browser_used_ie==false){ ?>
                                                                    <label class="onoffswitch-label" for="shipping_method_display">
                                                                        <div class="onoffswitch-inner"></div>
                                                                        <div class="onoffswitch-switch"></div>
                                                                    </label>
                                                                    <?php } ?>
                                                                </div>
                                                                <?php }else{ ?>
                                                                <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                                    <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[step][shipping_method][display_options]"  id="shipping_method_display" />
                                                                    <?php if($browser_used_ie==false){ ?>
                                                                    <label class="onoffswitch-label" for="shipping_method_display">
                                                                        <div class="onoffswitch-inner"></div>
                                                                        <div class="onoffswitch-switch"></div>
                                                                    </label>
                                                                    <?php } ?>
                                                                </div>
                                                                <?php } ?>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Select a default shipping method: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('This shipping method option will be selected by default for every new visitor. If the visitor is not new, it will use the saved values from the earlier select options. If this shipping method is not available for the current geo zone, the first shipping method will be selected.'); ?>"></i></td>
                                                            <td>
                                                                <select class="chosen-select" name="supercheckout[step][shipping_method][default_option]">
                                                                    <?php $i=0; foreach ($shipping_methods as $shipping_method) {?>
                                                                        <?php if(isset($settings['step']['shipping_method']['default_option']) && ($settings['step']['shipping_method']['default_option'] == $shipping_method['value'])&& $i!=0){ ?>
                                                                        <option value="<?php echo $shipping_method['value']; ?>" selected="selected"><?php echo $shipping_method['label']; ?></option>
                                                                        <?php }else{ ?>
                                                                    <option value="<?php echo $shipping_method['value']; ?>"><?php echo $shipping_method['label']; ?></option>
                                                                    <?php } $i++; ?>
                                                                    <?php } ?>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                          </div>                
                                    </div>
                                                    
                                    <!---------------------------------- Payment Methods ---------------------------------->
                                    <div ng-show="tab == 'payment_method'">
                                        <h3 class="heading-mosaic"><?php echo $this->__('Payment Method'); ?></h3>
                                          <div class="block">
                                                <table class="table table-bordered table-striped">
                                                    <tbody>

                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span class="<?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> "><?php echo $this->__('Display Payment Methods: '); ?></span><i class="icon-question-sign <?php if($browser_used_ie == false){echo 'control-label-relative'; } ?> " data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can display the payment step or hide it. you must still have at least one payment method that will be selected by default'); ?>"></i></td>
                                                            <td>
                                                                <input type="hidden" value="0" name="supercheckout[step][payment_method][display_options]" />
                                                                <?php if(isset($settings['step']['payment_method']['display_options']) && $settings['step']['payment_method']['display_options'] == 1){ ?>
                                                                <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                                    <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[step][payment_method][display_options]" checked="checked"  id="payment_method_display" />
                                                                    <?php if($browser_used_ie==false){ ?>
                                                                    <label class="onoffswitch-label" for="payment_method_display">
                                                                        <div class="onoffswitch-inner"></div>
                                                                        <div class="onoffswitch-switch"></div>
                                                                    </label>
                                                                    <?php } ?>
                                                                </div>
                                                                <?php }else{ ?>
                                                                <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?>>
                                                                    <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?>  type="checkbox" value="1" name="supercheckout[step][payment_method][display_options]"  id="payment_method_display" />
                                                                    <?php if($browser_used_ie==false){ ?>
                                                                    <label class="onoffswitch-label" for="payment_method_display">
                                                                        <div class="onoffswitch-inner"></div>
                                                                        <div class="onoffswitch-switch"></div>
                                                                    </label>
                                                                    <?php } ?>
                                                                </div>
                                                                <?php } ?>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Select a default payment method: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('This payment method option will be selected by default for every new visitor. If the visitor is not new, it will use the saved values from the earlier select options. If this payment method is not available for the current geo zone, the first payment method will be selected.'); ?>"></i></td>
                                                            <td>
                                                                <select class="chosen-select" name="supercheckout[step][payment_method][default_option]">
                                                                    <?php $i=0; foreach ($payment_methods as $payment_method) {?>
                                                                        <?php if(isset($settings['step']['payment_method']['default_option']) && ($settings['step']['payment_method']['default_option'] == $payment_method['value'])&& $i!=0){ ?>
                                                                        <option value="<?php echo $payment_method['value']; ?>" selected="selected"><?php echo $payment_method['label']; ?></option>
                                                                        <?php }else{ ?>
                                                                    <option value="<?php echo $payment_method['value']; ?>"><?php echo $payment_method['label']; ?></option>
                                                                    <?php } $i++; ?>
                                                                    <?php } ?>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                          </div>
                                    </div>
                                                    
                                    <!---------------------------------- Confirm ---------------------------------->                            
                                                    
                                                    <div ng-show="tab == 'confirm'">
                                        <h3 class="heading-mosaic"><?php echo $this->__('Confirm & Cart'); ?></h3>
                                           <div class="block">
                                                <table class="table table-bordered table-striped" id="cart_form">
                                                    <th></th>
                                                    <th class="guest"><?php echo $this->__('Guest Customer'); ?></th>
                                                    <th class="login"><?php echo $this->__('Logged in Customer'); ?></th>
                                                    <tbody>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Display cart '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('By hiding the cart, you are hiding the cart and the options in it. the confirm button stays to still complete the order.'); ?>"></i></td>
                                                            <td>
                                                                <div class="widget-body uniformjs">
                                                                    <input type="hidden" value="0" name="supercheckout[option][guest][cart][display]" />
                                                                    <?php if(isset($settings['option']['guest']['cart']['display']) && $settings['option']['guest']['cart']['display'] == 1){ ?>
                                                                    <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[option][guest][cart][display]" checked="checked"  id="option_guest_cart_display" />
                                                                    <?php }else{ ?>
                                                                    <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[option][guest][cart][display]"  id="option_guest_cart_display" />
                                                                    <?php } ?> <label for="option_guest_cart_display"><?php echo $this->__('Show'); ?></label>
                                                                </div>
                                                            </td>
                                                            <td><input type="hidden" value="0" name="supercheckout[option][logged][cart][display]" />
                                                                <div class="widget-body uniformjs">
                                                                    <?php if(isset($settings['option']['logged']['cart']['display']) && $settings['option']['logged']['cart']['display'] == 1){ ?>
                                                                    <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[option][logged][cart][display]" checked="checked"  id="option_logged_cart_display" />
                                                                    <?php }else{ ?>
                                                                    <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[option][logged][cart][display]"  id="option_logged_cart_display" />
                                                                    <?php } ?> <label for="option_logged_cart_display"><?php echo $this->__('Show'); ?></label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <?php $fields = array('image'=>array('id'=>'image','title'=>'Display Popup image'), 'name'=>array('id'=>'name','title'=>'Display Name'),'model'=>array('id'=>'model','title'=>'Display SKU'), 'quantity'=>array('id'=>'quantity','title'=>'Display Quantity'), 'price'=>array('id'=>'price','title'=>'Display Price'), 'total'=>array('id'=>'total','title'=>'Display Total'),'coupon'=>array('id'=>'coupon','title'=>'Display coupon input '));?>
                                                        <?php foreach($fields as $field){  ?>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__($field['title']);  ?></span></td>
                                                            <td>
                                                                <div class="widget-body uniformjs">
                                                                    <input type="hidden" value="0" name="supercheckout[option][guest][cart][columns][<?php echo $field['id']; ?>]" />
                                                                    <?php if(isset($settings['option']['guest']['cart']['columns'][$field['id']]) && $settings['option']['guest']['cart']['columns'][$field['id']] == 1){ ?>
                                                                    <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[option][guest][cart][columns][<?php echo $field['id']; ?>]" checked="checked"  id="option_guest_cart_columns_<?php echo $field['id']; ?>" />
                                                                    <?php }else{ ?>
                                                                    <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[option][guest][cart][columns][<?php echo $field['id']; ?>]"  id="option_guest_cart_columns_<?php echo $field['id']; ?>"/>
                                                                    <?php } ?> <label for="option_guest_cart_columns_<?php echo $field['id']; ?>"><?php echo $this->__('Show'); ?></label>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="widget-body uniformjs">
                                                                    <input type="hidden" value="0" name="supercheckout[option][logged][cart][columns][<?php echo $field['id']; ?>]" />
                                                                    <?php if(isset($settings['option']['logged']['cart']['columns'][$field['id']]) && $settings['option']['logged']['cart']['columns'][$field['id']] == 1){ ?>
                                                                    <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[option][logged][cart][columns][<?php echo $field['id']; ?>]" checked="checked"  id="option_logged_cart_columns_<?php echo $field['id']; ?>" />
                                                                    <?php }else{ ?>
                                                                    <input class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>" type="checkbox" value="1" name="supercheckout[option][logged][cart][columns][<?php echo $field['id']; ?>]"  id="option_logged_cart_columns_<?php echo $field['id']; ?>" />
                                                                    <?php } ?> <label for="option_logged_cart_columns_<?php echo $field['id']; ?>"><?php echo $this->__('Show'); ?></label>
                                                                </div>
                                                            </td>
                                                        </tr>

                                                        <?php } ?>
                                                        <tr>
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__('Popup Image Size: '); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__('You can set the size of image shown in popup over the product.'); ?>"></i></td>
                                                            <td colspan="2" class="settings"><?php if(isset($settings['step']['cart']['image_width']) && $settings['step']['cart']['image_width'] != ""){ ?>
                                                                <input  type="text" class="input-sm  col-md-2" value="<?php echo $settings['step']['cart']['image_width']; ?>" name="supercheckout[step][cart][image_width]" id="image_width_id" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>"/>
                                                                <?php }else{ ?>
                                                                <input type="text" class="input-sm col-md-2" value="" name="supercheckout[step][cart][image_width]" id="image_width_id"/>
                                                                <?php } ?>                                                                    
                                                                <?php if(isset($settings['step']['cart']['image_height']) && $settings['step']['cart']['image_height'] != ""){ ?>
                                                                <input  type="text" class="input-sm col-md-2" value="<?php echo $settings['step']['cart']['image_height']; ?>" name="supercheckout[step][cart][image_height]" id="image_height_id" class="<?php if($browser_used_ie){echo '';}else{echo 'checkbox';}?>"/>
                                                                <?php }else{ ?>
                                                                <input type="text" class="input-sm col-md-2" value="" name="supercheckout[step][cart][image_height]" id="image_height_id"/>
                                                                <?php } ?>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div class="title"><i class="icon-confirm"></i><span><?php echo $this->__('Confirm'); ?></span></div>
                                                <table class="table table-bordered table-striped" id="confirm_form">
                                                    <th></th>
                                                    <th class="guest"><?php echo $this->__('Guest Customer'); ?></th>
                                                    <th class="login"><?php echo $this->__('Logged in Customer'); ?></th>
                                                    <tbody class="sortable ui-sortable">
                                                        <?php  foreach($settings['step']['confirm']['fields'] as $field){ ?>
                                                            
                                                            <tr id="confirm_<?php echo $field['id']; ?>_input" class="sort-item" sort-data="<?php echo (isset($settings['step']['confirm']['fields'][$field['id']]['sort_order']) ? $settings['step']['confirm']['fields'][$field['id']]['sort_order'] : ''); ?>">
                                                            <td class="vel-tar vel-va vel-font-family vel-wid-per-30"><span><?php echo $this->__($field['title']); ?>
                                                                    <input type="hidden" value="<?php echo $field['id'];?>" name="supercheckout[step][confirm][fields][<?php echo $field['id']; ?>][id]" />
                                                            <input type="hidden" value="<?php echo $field['title'];?>" name="supercheckout[step][confirm][fields][<?php echo $field['id']; ?>][title]" />
                                                                    <input class="sort" class="input-sm form-control col-md-12" type="text" value="<?php echo (isset($settings['step']['confirm']['fields'][$field['id']]['sort_order'])) ? $settings['step']['confirm']['fields'][$field['id']]['sort_order'] : ''; ?>" name="supercheckout[step][confirm][fields][<?php echo $field['id']; ?>][sort_order]" />
                                                                </span>
                                                            </td>
                                                            <td >
                                                                <div class="widget-body uniformjs">
                                                                    <?php $show_warning=0; if(isset($settings['option']['guest']['confirm']['fields'][$field['id']]['display'])) { ?>
                                                                    <input type="hidden" value="0" name="supercheckout[option][guest][confirm][fields][<?php echo $field['id']; ?>][display]" />
                                                                    <?php if($field['id']=='agree'){ ?>
                                                                    <?php if($agreements_enable){ ?>
                                                                        <?php if(isset($settings['option']['guest']['confirm']['fields'][$field['id']]['display']) && $settings['option']['guest']['confirm']['fields'][$field['id']]['display'] == 1){ ?>
                                                                        <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][guest][confirm][fields][<?php echo $field['id']; ?>][display]" checked="checked" id="guest_confirm_fields_<?php echo $field['id']; ?>_display"/>
                                                                        <?php }else{ ?>
                                                                        <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][guest][confirm][fields][<?php echo $field['id']; ?>][display]" id="guest_confirm_fields_<?php echo $field['id']; ?>_display" />
                                                                        <?php } ?>
                                                                    <?php }else{ $show_warning=1;?>   
                                                                    <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][guest][confirm][fields][<?php echo $field['id']; ?>][display]" disabled="disabled" id="guest_confirm_fields_<?php echo $field['id']; ?>_display" />
                                                                    <?php } ?>
                                                                    <?php }else{ ?>
                                                                        <?php if(isset($settings['option']['guest']['confirm']['fields'][$field['id']]['display']) && $settings['option']['guest']['confirm']['fields'][$field['id']]['display'] == 1){ ?>
                                                                        <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][guest][confirm][fields][<?php echo $field['id']; ?>][display]" checked="checked" id="guest_confirm_fields_<?php echo $field['id']; ?>_display"/>
                                                                        <?php }else{ ?>
                                                                        <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][guest][confirm][fields][<?php echo $field['id']; ?>][display]" id="guest_confirm_fields_<?php echo $field['id']; ?>_display" />
                                                                        <?php } ?>
                                                                    <?php } ?>
                                                                    <label for="guest_confirm_fields_<?php echo $field['id']; ?>_display"><?php echo $this->__('Show'); ?></label>
                                                                    
                                                                    <?php if($show_warning){ ?>
                                                                        <i class="store_disabled" data-toggle="tooltip"  data-placement="top" data-original-title=""><span class="store_disabled_msg">Warning !</span></i>
                                                                    <?php } ?>
                                                                    <?php } ?>
                                                                </div>
                                                            </td>
                                                <td >
                                                <div class="widget-body uniformjs">
                                                    <?php if(isset($settings['option']['logged']['confirm']['fields'][$field['id']]['display'])) { ?>
                                                    <input type="hidden" value="0" name="supercheckout[option][logged][confirm][fields][<?php echo $field['id']; ?>][display]" />
                                                    <?php if($field['id']=='agree'){ ?>
                                                        <?php if($agreements_enable){ ?>
                                                            <?php if(isset($settings['option']['logged']['confirm']['fields'][$field['id']]['display']) && $settings['option']['logged']['confirm']['fields'][$field['id']]['display'] == 1){ ?>
                                                            <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][logged][confirm][fields][<?php echo $field['id']; ?>][display]" checked="checked" id="logged_confirm_fields_<?php echo $field['id']; ?>_display"/>
                                                            <?php }else{ ?>
                                                            <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][logged][confirm][fields][<?php echo $field['id']; ?>][display]" id="logged_confirm_fields_<?php echo $field['id']; ?>_display" />
                                                            <?php } ?>
                                                        <?php }else{ ?>
                                                        <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][logged][confirm][fields][<?php echo $field['id']; ?>][display]" disabled="disabled" id="logged_confirm_fields_<?php echo $field['id']; ?>_display" />
                                                        <?php } ?>
                                                    <?php }else{ ?>
                                                        <?php if(isset($settings['option']['logged']['confirm']['fields'][$field['id']]['display']) && $settings['option']['logged']['confirm']['fields'][$field['id']]['display'] == 1){ ?>
                                                            <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][logged][confirm][fields][<?php echo $field['id']; ?>][display]" checked="checked" id="logged_confirm_fields_<?php echo $field['id']; ?>_display"/>
                                                            <?php }else{ $show_warning=1; ?>
                                                            <input class="checkbox" type="checkbox" value="1" name="supercheckout[option][logged][confirm][fields][<?php echo $field['id']; ?>][display]" id="logged_confirm_fields_<?php echo $field['id']; ?>_display" />
                                                            <?php } ?>
                                                    <?php } ?>
                                                    <label for="logged_confirm_fields_<?php echo $field['id']; ?>_display"><?php echo $this->__('Show'); ?></label>
                                                    
                                                    <?php } ?>
                                                </div>
                                            </td>
                                            </tr>          
                                            <?php } /*foreach fields*/?>
                                            </tbody>
                                            </table>
                                        </div>             
                                    </div>
                                    
                                    <!-----------------------------------------Design-------------------------------------------->
                                    <div ng-show="tab == 'design'" id="supercheckout-admin-design">
                                        <h3 class="heading-mosaic"><?php echo $this->__('Design'); ?></h3>
  
    
  
    
    
                                    <!--------------------------------- Setting values in hidden field so that they can be save on other designs --------------------------------->
                                        
                                        <?php $layout_array = array(); $layout_array = array('one-column','two-column','three-column'); ?>
                                        <?php foreach($settings['step'] as $step=>$value){ ?>
                                            <?php foreach($layout_array as $layout_value){ ?>
                                                    <?php if($step != 'html' && $step != 'modal_value'){ ?>
                                                <input   type="hidden"  class="sort col-data" name="supercheckout[step][<?php echo $step; ?>][<?php echo $layout_value; ?>][column]" value="<?php if(isset($settings['step'][$step][$layout_value]['column']))echo $settings['step'][$step][$layout_value]['column']; ?>" />
                                                <input   type="hidden"  class="sort col-data" name="supercheckout[step][<?php echo $step; ?>][<?php echo $layout_value; ?>][row]" value="<?php if(isset($settings['step'][$step][$layout_value]['row'])) echo  $settings['step'][$step][$layout_value]['row']; ?>" />
                                                <input   type="hidden"  class="sort col-data" name="supercheckout[step][<?php echo $step; ?>][<?php echo $layout_value; ?>][column-inside]" value="<?php if(isset($settings['step'][$step][$layout_value]['column-inside'])) echo $settings['step'][$step][$layout_value]['column-inside']; ?>" />
                                                    <?php } ?>
                                            <?php } ?>                
                                        <?php } ?> 
                                             
                                                
                                                
                                        <?php foreach($layout_array as $layout_value){ ?>
                                            <input type="hidden"  class="column-data-1 col" name="supercheckout[general][column_width][<?php echo $layout_value; ?>][1]" value="<?php echo $settings['general']['column_width'][$layout_value][1]; ?>" />
                                            <input type="hidden"  class="column-data-2 col" name="supercheckout[general][column_width][<?php echo $layout_value; ?>][2]" value="<?php echo $settings['general']['column_width'][$layout_value][2]; ?>" />
                                            <input type="hidden"  class="column-data-2 col" name="supercheckout[general][column_width][<?php echo $layout_value; ?>][3]" value="<?php echo $settings['general']['column_width'][$layout_value][3]; ?>" />
                                            <input type="hidden"  class="column-data-3 col" name="supercheckout[general][column_width][<?php echo $layout_value; ?>][inside][1]" value="<?php echo $settings['general']['column_width'][$layout_value]['inside'][1]; ?>" />
                                            <input type="hidden"  class="column-data-3 col" name="supercheckout[general][column_width][<?php echo $layout_value; ?>][inside][2]" value="<?php echo $settings['general']['column_width'][$layout_value]['inside'][2]; ?>" />
                                        <?php } ?>
                                            
                                        <input type="hidden" id="modals-bootbox-prompt_h_header" name="supercheckout[step][html_value][value][header]" value="<?php if(isset($settings["step"]["html_value"]["value"]["header"])){ echo htmlentities($settings["step"]["html_value"]["value"]["header"]); } ?>">
                                        <input type="hidden" id="modals-bootbox-prompt_h_footer" name="supercheckout[step][html_value][value][footer]" value="<?php if(isset($settings["step"]["html_value"]["value"]["footer"])){ echo htmlentities($settings["step"]["html_value"]["value"]["footer"]); } ?>">
                                        
                                        <?php foreach($settings['step']['html'] as $k=>$v){ ?>
                                            <input type="hidden" id="modals-bootbox-prompt_h_<?php echo $k; ?>" name="supercheckout[step][html_value][value][<?php echo $k; ?>]" value="<?php if(isset($settings["step"]["html_value"]["value"][$k])){ echo htmlentities($settings["step"]["html_value"]["value"][$k]); } ?>">
                                        <?php } ?>
                                        <?php foreach($settings['step']['html'] as $k=>$v){ ?>
                                        <input id="two_col_h_<?php echo $k; ?>"  type="hidden"  class="sort col-data" name="supercheckout[step][html][<?php echo $k; ?>][two-column][column]" value="<?php echo $settings['step']['html'][$k]['two-column']['column']; ?>" />
                                        <input id="two_row_h_<?php echo $k; ?>"  type="hidden"  class="sort row-data" name="supercheckout[step][html][<?php echo $k; ?>][two-column][row]" value="<?php echo $settings['step']['html'][$k]['two-column']['row']; ?>" />
                                        <input id="two_col_ins_h_<?php echo $k; ?>"  type="hidden"  class="sort col-data-inside" name="supercheckout[step][html][<?php echo $k; ?>][two-column][column-inside]" value="<?php echo $settings['step']['html'][$k]['two-column']['column-inside']; ?>" />
                                        <?php } ?>
                                        <?php foreach($settings['step']['html'] as $k=>$v){ ?>
                                        <input id="one_col_h_<?php echo $k; ?>"  type="hidden"  class="sort col-data" name="supercheckout[step][html][<?php echo $k; ?>][one-column][column]" value="<?php echo $settings['step']['html'][$k]['one-column']['column']; ?>" />
                                        <input id="one_row_h_<?php echo $k; ?>"  type="hidden"  class="sort row-data" name="supercheckout[step][html][<?php echo $k; ?>][one-column][row]" value="<?php echo $settings['step']['html'][$k]['one-column']['row']; ?>" />
                                        <input id="one_col_ins_h_<?php echo $k; ?>"  type="hidden"  class="sort col-data-inside" name="supercheckout[step][html][<?php echo $k; ?>][one-column][column-inside]" value="<?php echo $settings['step']['html'][$k]['one-column']['column-inside']; ?>" />
                                        <?php } ?>
                                        <?php foreach($settings['step']['html'] as $k=>$v){ ?>
                                        <input id="three_col_h_<?php echo $k; ?>"  type="hidden"  class="sort col-data" name="supercheckout[step][html][<?php echo $k; ?>][three-column][column]" value="<?php echo $settings['step']['html'][$k]['three-column']['column']; ?>" />
                                        <input id="three_row_h_<?php echo $k; ?>"  type="hidden"  class="sort row-data" name="supercheckout[step][html][<?php echo $k; ?>][three-column][row]" value="<?php echo $settings['step']['html'][$k]['three-column']['row']; ?>" />
                                        <input id="three_col_ins_h_<?php echo $k; ?>"  type="hidden"  class="sort col-data-inside" name="supercheckout[step][html][<?php echo $k; ?>][three-column][column-inside]" value="<?php echo $settings['step']['html'][$k]['three-column']['column-inside']; ?>" />
                                        <?php } ?>
                                        <input id="value_modal" type="hidden" name="supercheckout[step][modal_value]" value="<?php echo isset($settings['step']['modal_value'])?$settings['step']['modal_value']:1 ;?>">
                                        
                                        <!--------------------------------- Setting values in hidden field so that they can be save on other designs --------------------------------->
                                        
                                            <div class="block" >

                                               
                                                <?php
                                                if(!isset($_GET['layout'])) {
                                                    $_GET['layout'] = '';
                                                }
                                                ?>
                                                <select class="chosen-select col-md-2" id="layout_select_box" name="supercheckout[general][layout]" onChange=" document.cookie ='supercheckoutTab=design'; locate='<?php echo $magentoCurrentUrl; ?>?layout='+ this.options[this.selectedIndex].value; window.location=locate; ">
                                                    <?php $i=0;  if($_GET['layout']=='2-Column' || $layout=='2-Column'  && $i !=0){ ?>
                                                        <option value="2-Column" selected="selected">2-Column</option>
                                                    <?php }else{ ?>
                                                        <option value="2-Column">2-Column</option>
                                                    <?php } $i++; ?>
                                                    <?php if($_GET['layout']=='3-Column' || $layout=='3-Column'){ ?>
                                                        <option value="3-Column" selected="selected">3-Column</option>
                                                    <?php }else{ ?>
                                                        <option value="3-Column">3-Column</option>
                                                    <?php } ?>

                                                </select><br/>
                                                    <script type="text/ng-template" id="myModalContent.html">
                                                        <div class="supercheckout_modal-header">
                                                            <h3><?php echo $this->__('Enter Your HTML content here:')?></h3>
                                                        </div>
                                                        <div class="supercheckout_modal-body">
                                                            <textarea id="text_area_html" class="supercheckout_textarea_html" name="supercheckout[step][html_value][value][{{element_id}}]">{{stored_value}}</textarea>            
                                                        </div>
                                                        <div class="supercheckout_modal-footer">
                                                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                                                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                                                        </div>
                                                    </script>
                                                    
                                                            

    

                                                             <div class="portlet">
                                                                    <div class="portlet-header"><?php echo $this->__('HTML Header Content'); ?></div>
                                                                    <div class="portlet-content">
                                                                        <div class="text" style="overflow:visible !important;" >

                                                                            <a href="#" data-toggle="tooltip"  data-placement="top" data-original-title="Edit this HTML content" data="header" id="modals-bootbox-prompt_footer" ng-click="open($event);" class="glyphicons edit" ><i id="modals-bootbox-prompt_footer" ></i></a>
                                                                        </div>
                                                                    </div>
                                                            </div>
                                                       
                                                            <div >
                                                                <div class="supercheckout-admin-columns" ng-if="enable_column_width_fields == 'three-column'">
                                                                <input type="text" id="three-column-1" readonly="readonly" class="column-data-1 col" name="supercheckout[general][column_width][<?php echo $layout_name; ?>][1]" value="{{first_column()}}" ng-style="{width:first_column()+'%'}" />
                                                                <input type="text" id="three-column-2" readonly="readonly" class="column-data-2 col" name="supercheckout[general][column_width][<?php echo $layout_name; ?>][2]" value="{{middle_column()}}" ng-style="{width:middle_column()+'%'}"/>
                                                                <input type="text" id="three-column-3" readonly="readonly" class="column-data-3 col" name="supercheckout[general][column_width][<?php echo $layout_name; ?>][3]" value="{{last_column()}}" ng-style="{width:last_column_width()+'%' <?php if($layout == '2-Column'){ echo ",display:'none'"; } ?>}" />
                                                            </div>
                                                            <div class="supercheckout-admin-columns" ng-if="enable_column_width_fields == 'two-column'" >
                                                                <input type="text" id="three-column-1" readonly="readonly" class="column-data-1 col" name="supercheckout[general][column_width][<?php echo $layout_name; ?>][1]" value="{{first_column_twolayout()}}" ng-style="{width:first_column_twolayout()-1+'%'}" />
                                                                <input type="text" id="three-column-2" readonly="readonly" class="column-data-2 col" name="supercheckout[general][column_width][<?php echo $layout_name; ?>][2]" value="{{second_column()}}" ng-style="{width:second_column()+'%'}"/>
                                                            </div>
                                                                    
                                                                <?php if($layout == '3-Column'){ ?>
                                                                
                                                                    <rzslider 
                                                                        rz-slider-floor="priceSlider.floor"
                                                                        rz-slider-ceil="priceSlider.ceil"
                                                                        rz-slider-model="priceSlider.min"
                                                                        rz-slider-high="priceSlider.max"
                                                                        rz-slider-step="{{priceSlider.step}}">
                                                                            
                                                                    </rzslider>
                                                                <?php }elseif($layout == '2-Column'){ ?>
                                                                <rzslider
                                                                        rz-slider-floor="twoColumnSlider.floor"
                                                                        rz-slider-ceil="twoColumnSlider.ceil"
                                                                        rz-slider-model="twoColumnSlider.min"
                                                                        rz-slider-step="{{twoColumnSlider.step}}">
                                                                </rzslider> 
                                                                <?php } ?>



                                                                </div>
                                                                
                                                                <script type="text/ng-template" id="items_renderer.html">
                                                                    <div ng-show="item.show == true" class="portlet" id = "portlet_{{item.data}}" row-data="{{item.row_data}}" data = "{{item.data}}">
                                                                        <div class="portlet-header" ui-tree-handle>
                                                                            {{item.title}}
                                                                        </div>
                                                                    <div class="portlet-content">
                                                                        <div ng-if="item.attributes == false" class="text">{{item.content}}</div>
                                                                        <div class="text">
                                                                            <div ng-show="item.attributes == true" style="overflow:visible !important;">
                                                                                <a href="#" data-toggle="tooltip"  data-placement="top" data-original-title=" Add new HTML content" id="duplicate_button_{{item.data}}" storage="{{item.id}}" data="{{item.data}}" class="glyphicons more_windows"  ng-click="duplicate_html($event);" ><i id="duplicate_button_{{item.data}}"></i></a>

                                                                                <a href="#" data-toggle="tooltip"  data-placement="top" data-original-title="Edit this HTML content" id="modals-bootbox-prompt_{{item.data}}" data="{{item.data}}" data-toggle="modal" class="glyphicons edit" ng-click="open($event);" ><i id="modals-bootbox-prompt_{{item.data}}"></i></a>

                                                                                <a href="#" ng-if="item.data != '0_0'" data-toggle="tooltip"  data-placement="top" data-original-title="Remove this HTML content" id="delete_button_{{item.data}}" data="{{item.data}}" data-toggle="modal" class="glyphicons remove"  onClick="remove_html(this.id);" ><i></i></a>

                                                                            </div>     
                                                                        </div>
                                                                    <div ng-if="item.attributes == false">
                                                                        <input   type="text" id="{{item.id}}_col"  class="sort col-data portlet_{{item.data}}_col_data" name="supercheckout[step][{{item.name}}][<?php echo $layout_name; ?>][column]" value="{{item.col_data}}" />
                                                                        <input   type="text" id="{{item.id}}_row" class="sort row-data portlet_{{item.data}}_row_data" name="supercheckout[step][{{item.name}}][<?php echo $layout_name; ?>][row]" value="{{item.row_data}}" />
                                                                        <input   type="text" id="{{item.id}}_col_inside" class="sort col-data-inside  portlet_{{item.data}}_col_inside_data" name="supercheckout[step][{{item.name}}][<?php echo $layout_name; ?>][column-inside]" value="{{item.col_inside_data}}" />
                                                                    
                                                                    
                                                                    </div>   
                                                                    <div ng-if="item.attributes == true">
                                                                    

                                                                    
                                                                   <?php if($layout_name == 'three-column'){ ?>
                                                                        <input   type="text" id="{{item.id}}_col"  class="sort col-data portlet_{{item.data}}_col_data" name="supercheckout[step][{{item.name}}][{{item.data}}][<?php echo $layout_name; ?>][column]" value="{{item.col_data}}" />
                                                                        <input   type="text" id="{{item.id}}_row" class="sort row-data portlet_{{item.data}}_row_data" name="supercheckout[step][{{item.name}}][{{item.data}}][<?php echo $layout_name; ?>][row]" value="{{item.row_data}}" />
                                                                        <input   type="text" id="{{item.id}}_col_inside" class="sort col-data-inside  portlet_{{item.data}}_col_inside_data" name="supercheckout[step][{{item.name}}][{{item.data}}][<?php echo $layout_name; ?>][column-inside]" value="{{item.col_inside_data}}" />
                                                                    
                                                                        <input   type="text"   class="sort col-data portlet_{{item.data}}_col_data" name="supercheckout[step][{{item.name}}][{{item.data}}][two-column][column]" value="{{item.col_data}}" />
                                                                        <input   type="text"  class="sort row-data portlet_{{item.data}}_row_data" name="supercheckout[step][{{item.name}}][{{item.data}}][two-column][row]" value="{{item.row_data}}" />
                                                                        <input   type="text"  class="sort col-data-inside  portlet_{{item.data}}_col_inside_data" name="supercheckout[step][{{item.name}}][{{item.data}}][two-column][column-inside]" value="{{item.col_inside_data}}" />
                                                                    
                                                                <?php }elseif($layout_name == 'two-column'){ ?>
                                                                    <input   type="text" id="{{item.id}}_col"  class="sort col-data portlet_{{item.data}}_col_data" name="supercheckout[step][{{item.name}}][{{item.data}}][<?php echo $layout_name; ?>][column]" value="{{item.col_data}}" />
                                                                        <input   type="text" id="{{item.id}}_row" class="sort row-data portlet_{{item.data}}_row_data" name="supercheckout[step][{{item.name}}][{{item.data}}][<?php echo $layout_name; ?>][row]" value="{{item.row_data}}" />
                                                                        <input   type="text" id="{{item.id}}_col_inside" class="sort col-data-inside  portlet_{{item.data}}_col_inside_data" name="supercheckout[step][{{item.name}}][{{item.data}}][<?php echo $layout_name; ?>][column-inside]" value="{{item.col_inside_data}}" />
                                                                    
                                                                        <input   type="text"   class="sort col-data portlet_{{item.data}}_col_data" name="supercheckout[step][{{item.name}}][{{item.data}}][three-column][column]" value="{{item.col_data}}" />
                                                                        <input   type="text"  class="sort row-data portlet_{{item.data}}_row_data" name="supercheckout[step][{{item.name}}][{{item.data}}][three-column][row]" value="{{item.row_data}}" />
                                                                        <input   type="text"  class="sort col-data-inside  portlet_{{item.data}}_col_inside_data" name="supercheckout[step][{{item.name}}][{{item.data}}][three-column][column-inside]" value="{{item.col_inside_data}}" />
                                                                <?php } ?>
                                                                    </div>
                                                                    </div>
                                                                    </div>


                                                                </script>
                                                                
                                                                <div class="container-x">
                                                                    <?php if($layout == '3-Column'){ ?>
                                                                        <ul id="super_column_1" data="column_1_id" class="column" ui-tree="options_list1" ui-tree-nodes="" ng-model="list1" ng-style="{width:first_column()+'%' , padding:'0 5px 0 0'}" >
                                                                          <li ng-repeat="item in list1" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="{{item.col_inside_data}}" ui-tree-node="" ng-include="'items_renderer.html'"></li>
                                                                          <!--<li ui-tree-node="" ></li>-->
                                                                        </ul>
                                                                    <?php }elseif($layout == '2-Column'){ ?>
                                                                        <ul id="super_column_1" class="column" ui-tree="options_list8" ui-tree-nodes="" ng-model="list1" ng-style="{width:first_column_twolayout()+'%', padding:'0 5px 0 0'}" >
                                                                          <li ng-repeat="item in list1" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="{{item.col_inside_data}}" ui-tree-node="" ng-include="'items_renderer.html'"></li>
                                                                          <!--<li ui-tree-node="" ></li>-->
                                                                        </ul>
                                                                    <?php } ?>                                                                        
                                                                    <?php if($layout == '3-Column'){ ?>
                                                                        <ul id="super_column_2" class="column" ui-tree="options_list2" ui-tree-nodes="" ng-model="list2" ng-style="{width:middle_column()+'%', padding:'0 20px'}">
                                                                          <li ng-repeat="item in list2" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="{{item.col_inside_data}}" ui-tree-node="" ng-include="'items_renderer.html'"></li>
                                                                          <!--<li ui-tree-node="" ></li>-->
                                                                        </ul>
                                                                    <?php }elseif($layout == '2-Column'){ ?>
                                                                        <ul id="super_column_2" class="column" ui-tree="options_list2" ui-tree-nodes="" ng-model="list2" ng-style="{width:second_column()+'%', padding:'0 20px'}">
                                                                            <ul id="column-2-upper" ng-model="upper_column" ui-tree="options_list4" ui-tree-nodes="" class="column column-1" col-data="1" col-inside-data="2" style="min-height: 30px !important; width:100% !important; height:auto !important;">
                                                                                <li ng-repeat="item in upper_column" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="{{item.col_inside_data}}" ui-tree-node="" ng-include="'items_renderer.html'"></li>
                                                                                <!--<li ui-tree-nodes-item="" ></li>-->
                                                                            </ul>
                                                                            <div class="supercheckout-admin-columns">
                                                                                
                                                                                    <input type="text" id="column-1-inside-text"  readonly="readonly" class="column-data-1 col" name="supercheckout[general][column_width][two-column][inside][1]" value="{{first_column_inside()}}" ng-style="{width:first_column_inside()-1 +'%'}" />
                                                                                    <input type="text" id="column-2-inside-text"  readonly="readonly" class="column-data-2 col" name="supercheckout[general][column_width][two-column][inside][2]" value="{{second_column_inside()}}" ng-style="{width:second_column_inside()+'%'}" />
                                                                                
                                                                            </div>
                                                                            <rzslider
                                                                                rz-slider-floor="twoColumnInsideSlider.floor"
                                                                                rz-slider-ceil="twoColumnInsideSlider.ceil"
                                                                                rz-slider-model="twoColumnInsideSlider.min"
                                                                                rz-slider-step="{{twoColumnInsideSlider.step}}">
                                                                            </rzslider> 

                                                                            <ul id="column-1-inside" ui-tree="options_list5" ui-tree-nodes="" class="column column-1" ng-model="column_inside_left" col-inside-data="3" col-data="1" style="min-height: 30px !important;" ng-style="{height:'auto !important;', width:first_column_inside()+'%'}">
                                                                                <li ng-repeat="item in column_inside_left" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="{{item.col_inside_data}}" ui-tree-node="" ng-include="'items_renderer.html'"></li>
                                                                                <!--<li ui-tree-nodes-item="" ></li>-->
                                                                            </ul>
                                                                            <ul  ng-model="column_inside_right" id="column-2-inside" ui-tree="options_list6" ui-tree-nodes="" class="column column-2" col-inside-data="5" col-data="2" style="min-height: 30px !important;" ng-style="{ height:'auto !important', width:second_column_inside()+'%'}">
                                                                                <li ng-repeat="item in column_inside_right" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="{{item.col_inside_data}}" ui-tree-node ng-include="'items_renderer.html'"></li>
                                                                                
                                                                            </ul>
                                                                            <hr class="design-separator" size="2">
                                                                            <ul  ng-model="lower_column" id="column-2-lower" ui-tree="options_list7" ui-tree-nodes="" class="column column-1" col-data="1" col-inside-data="4" style="min-height: 30px !important; width:100% !important; height:auto !important;">
                                                                                <li ng-repeat="item in lower_column" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="{{item.col_inside_data}}" ui-tree-node ng-include="'items_renderer.html'"></li>
                                                                                <!--<li ui-tree-nodes-item="" ></li>-->
                                                                            </ul>   
                                                                          <!--<li ng-repeat="item in list2" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="{{item.col_inside_data}}" ui-tree-nodes-item="" ng-include="'items_renderer.html'"></li>-->
                                                                        </ul>
                                                                    <?php } ?>
                                                                    <?php if($layout == '3-Column'){ ?>
                                                                        <ul id="super_column_3" class="column" ui-tree="options_list3" ui-tree-nodes="" ng-model="list3" ng-style="{width:last_column_width()+'%', padding:'0 0 0 5px'}" >
                                                                          <li ng-repeat="item in list3" col-data="{{item.col_data}}" row-data="{{item.row_data}}" col-inside-data="" ui-tree-node="" ng-include="'items_renderer.html'"></li>
                                                                          <!--<li ui-tree-nodes-item="" ></li>-->
                                                                        </ul>
                                                                    <?php } ?>

                                                                  </div>

<script>
// CONTROLLER TO HANDLE MODAL FOR FOOTER
app.controller('ModalFooterCtrl',function ($scope, $modal, $log) {
  $scope.open = function () {
    var modalInstance = $modal.open({
      templateUrl: 'myModalContent.html',
      controller: ModalInstanceFooterCtrl,
      resolve: {
        stored_value: function () {
            
            if(angular.element( document.querySelector( '#modals-bootbox-prompt_h_footer'  ) ).val() != ""){
                var stored_value = document.getElementById('modals-bootbox-prompt_h_footer').value;
                
            }else{
                var stored_value="";
            }
            return stored_value;
        },
        element_id:function(){
          return 'footer'  ;
        }
              
      }
    });
  };
});


var ModalInstanceFooterCtrl = function ($scope, $modalInstance, stored_value,element_id) {

  $scope.stored_value = stored_value;
  $scope.element_id = element_id;


  $scope.ok = function () {
      var html_string=angular.element(document.querySelector('#text_area_html')).val();
      
            angular.element(document.querySelector('#modals-bootbox-prompt_h_footer')).val(html_string);
    $modalInstance.close();
  };

  $scope.cancel = function () {
    $modalInstance.dismiss('cancel');
  };
};
</script>

                                                        
                                                            
<div ng-controller="ModalFooterCtrl">
    <script type="text/ng-template" id="myModalContent.html">
        <div class="supercheckout_modal-header">
            <h3><?php echo $this->__('Enter Your HTML content here:')?></h3>
        </div>
        <div class="supercheckout_modal-body">
            <textarea id="text_area_html" class="supercheckout_textarea_html" name="supercheckout[step][html_value][value][{{element_id}}]">{{stored_value}}</textarea>            
        </div>
        <div class="supercheckout_modal-footer">
            <button class="btn btn-primary" ng-click="ok()">OK</button>
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
        </div>
    </script>
 <div class="portlet">
                                                                    <div class="portlet-header"><?php echo $this->__('HTML Footer Content'); ?></div>
                                                                    <div class="portlet-content">
                                                                        <div class="text" style="overflow:visible !important;" >

                                                                        <a href="#" data-toggle="tooltip"  data-placement="top" data-original-title="Edit this HTML content" id="modals-bootbox-prompt_footer" ng-click="open();" class="glyphicons edit" ><i></i></a>
                                                                        </div>
                                                                    </div>
                                                            </div>

                                                            
                                                            <br style="clear:both">
                                            </div>
                                    </div>
                                </div>
                                    
                                    <!-----------------------------------------Shopping cart Settings -------------------------------------------->
                                    <div ng-show="tab == 'ajax_cart'" id="supercheckout-admin-ajax_cart">
                                        <h3 class="heading-mosaic"><?php echo $this->__('Shopping Cart Popup'); ?></h3>
                                        <table class="table table-bordered table-striped" id="confirm_form">
                                        <tr>
                                                <td class="name" width="200px"><span class="control-label"><?php echo $this->__("Enable/Disable"); ?></span>                                                                
                                                    <i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__("Enable or disable Shopping Cart Popup Xtra Box. This option will turn on all the modules and extensions, that are connected with Product page Popup Box."); ?>"></i></td>
                                                <td class="settings ">
                                                    <input type="hidden"value="0" name="supercheckout[shopping_cart][enable]" />
                                                        <?php if(isset($settings['shopping_cart']['enable']) && $settings['shopping_cart']['enable'] == 1){ ?>
                                                        <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?> >
                                                            <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?> type="checkbox" value="1" name="supercheckout[shopping_cart][enable]" id="shopping_cart_enable" checked="checked" />
                                                            <?php if($browser_used_ie==false){ ?>
                                                            <label class="onoffswitch-label" for="shopping_cart_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                            </label>
                                                            <?php } ?>
                                                        </div>
                                                        <?php } else { ?>
                                                        <div <?php if($browser_used_ie==true){ echo""; }else{ echo'class="onoffswitch" data-on="primary" data-off="default"'; } ?> >
                                                            <input <?php if($browser_used_ie==true){ echo'class=""'; }else{ echo'class="onoffswitch-checkbox"'; } ?> type="checkbox" value="1" name="supercheckout[shopping_cart][enable]" id="shopping_cart_enable" />
                                                            <?php if($browser_used_ie==false){ ?>
                                                            <label class="onoffswitch-label" for="shopping_cart_enable">
                                                            <div class="onoffswitch-inner"></div>
                                                            <div class="onoffswitch-switch"></div>
                                                            </label>
                                                            <?php } ?>
                                                        </div>
                                                        <?php } ?> 
                                                </td>

                                            </tr>     

                                            <tr>
                                                <td class="name"><span><?php echo $this->__("Select option to show on popup: "); ?></span><i class="icon-question-sign" data-toggle="tooltip"  data-placement="top" data-original-title="<?php echo $this->__("Select either banner or relative products to show in popup box with product details."); ?>"></i></td>
                                                <td class="settings">

                                                    <?php if (isset($settings['shopping_cart']['show'])) { ?>

                                                        <div class="widget-body uniformjs">
                                                            <input id="cart_none" class="radio" type="radio" value="none" name="supercheckout[shopping_cart][show]" <?php
                                                    if ($settings['shopping_cart']['show'] == 'none') {
                                                        echo 'checked="checked"';
                                                    }
                                                        ?> />
                                                            <label for="cart_none"><?php echo $this->__("None"); ?></label>
                                                            <input id="cart_banner" class="radio" type="radio" value="banner" name="supercheckout[shopping_cart][show]" <?php
                                                               if ($settings['shopping_cart']['show'] == 'banner') {
                                                                   echo 'checked="checked"';
                                                               }
                                                        ?>  />
                                                            <label for="cart_banner"><?php echo $this->__("Banners"); ?></label>
                                                            <input id="cart_related_product" class="radio" type="radio" value="related_product" name="supercheckout[shopping_cart][show]" <?php
                                                               if ($settings['shopping_cart']['show'] == 'related_product') {
                                                                   echo 'checked="checked"';
                                                               }
                                                        ?> />
                                                            <label for="cart_related_product"><?php echo $this->__("Related Products"); ?></label>
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="span-general-show"></span>
                                                        </div>
                                                    <?php } else { ?>
                                                        <div class="widget-body uniformjs">
                                                            <input id="cart_none" class="radio" type="radio" value="none" name="supercheckout[shopping_cart][show]" checked="checked"   />
                                                            <label for="cart_none"><?php echo $this->__("None"); ?></label>
                                                            <input id="cart_banner" class="radio" type="radio" value="banner" name="supercheckout[shopping_cart][show]"   />
                                                            <label for="cart_banner"><?php echo $this->__("Banners"); ?></label>
                                                            <input id="cart_related_product" class="radio" type="radio" value="related_product" name="supercheckout[shopping_cart][show]" />
                                                            <label for="cart_related_product"><?php echo $this->__("Related Products"); ?></label>
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="span-general-show"></span>
                                                        </div>
                                                    <?php } ?>

                                                </td>

                                            </tr>

                                            <tr id="tr_banner_url">
                                                <td colspan="2">
                                                    <table class="form" id="tbl_banner_url">
                                                        <tbody>
                                                        </tbody>
                                                    </table>
                                                    <button id="btn_add_banner" class="btn " onclick="return addbanner()"> <?php echo $this->__("Add Banner (Max 3)"); ?>  </button>
                                                    <span id="span_add_banner">  </span><input type="hidden" value="0" id="hidden_banner_url"/><input name="supercheckout[shopping_cart][banner_count]" type="hidden" value="0" id="hidden_banner_url_count"/>
                                                </td>
                                            </tr>
                                            </table>
                                    </div>
                            </div>
                            <!-- layout-->
                        </form>
                    </div>
                    <!-- content tabs--> 
                </div>
            </div>
        </div>
    </div>
</div>
    <!--<h6 class="heading-mosaic" style="margin-left:40%;font-weight: bold;">Developed By Velocity Software Solutions Pvt. Ltd<br/></h6>-->
    <!--<h6 style="margin-left:35%;font-weight: bold;"><a target="_blank" style="color:blue; margin-right:20px;font-weight: bold;" href="http://www.velsof.com">www.velsof.com</a><a style="color:blue; font-weight: bold;margin-right:20px;" href="mailto:inquiry@velsof.com">inquiry@velsof.com</a>#1 Company for any eCommerce related development</h6>-->
<?php
    $column_1 = '';
    $column_2 = '';
    $column_3 = '';
    $column_4 = '';
    $column_5 = '';
    if($layout == '3-Column') {
        $main_width = 100/100;
        $column_1 =  $settings['general']['column_width']['three-column'][1]/$main_width; 
        $column_2 = $settings['general']['column_width']['three-column'][2]/$main_width;
        $column_3 = $settings['general']['column_width']['three-column'][3]/$main_width-1;
    } else if($layout == '2-Column') {
        $main_width = 100/100;
        $column_1 =  $settings['general']['column_width']['two-column'][1]/$main_width; 
        $column_2 = $settings['general']['column_width']['two-column'][2]/$main_width-1;
        $column_4 = $settings['general']['column_width']['two-column']['inside'][1]/$main_width;
        $column_5 = $settings['general']['column_width']['two-column']['inside'][2]/$main_width-1;
    }else if($layout == '1-Column') {
        $column_1 = 100;
        $column_2 = 0;
        $column_3 = 0; 
        $column_4 = 0;
        $column_5 = 0;
    }
    ?>
    <style type="text/css">
        
        tr.even { background-color: #EDEDED; }
        tr.odd { background-color: white; }
        .column-1, .column-data-1{width:<?php echo $column_1; ?>%;}
        .column-2, .column-data-2{width:<?php echo $column_2; ?>%;} 
        .column-3, .column-data-3{width:<?php echo $column_3; ?>%;}
        #column-1-inside,#column-1-inside-text {width:<?php echo $column_4; ?>%;}
        #column-2-inside,#column-2-inside-text {width:<?php echo $column_5; ?>%;}

    </style>

<script>

document.observe('dom:loaded', function(){
    $$('i[data-toggle="tooltip"]').each(function(element){
        $(element).setAttribute('title', $(element).readAttribute('data-original-title'));
        new Tooltip(element, {backgroundColor: "#333", borderColor: "#000",
            textColor: "#fff", textShadowColor: "", mouseFollow: false, opacity: .90});
    });
});
document.observe('dom:loaded', function(evt) {
    var config = {
        '.chosen-select' : {disable_search_threshold:20,width:'200px'}
    }
    var results = [];
    for (var selector in config) {
        var elements = $$(selector);
        for (var i = 0; i < elements.length; i++) {
            results.push(new Chosen(elements[i],config[selector]));
        }
    }
    return results;
});    
</script>
 <script>
app.controller('DragDropCtrl', function($scope) {
    $scope.handleDrop = function() {
        alert('Item has been dropped');
    }
});

if ( document.addEventListener && window.addEventListener ) {
document.addEventListener('DOMContentLoaded', function() {
        var container = document.getElementById("payment_address_form");
        var tags = document.getElementById('payment_address_form').getElementsByTagName('tr');
        var sortRows = [];
        for (var i=0; i<tags.length; i++) {
            var sortPart = tags[i].readAttribute('sort-data');
            if (sortPart >= 1) {
                sortRows.push([ 1 * sortPart , tags[i] ]);
            }
        }
        sortRows.sort(function(x, y) {
            return x[0] - y[0];
        });
        for (var i=0; i<sortRows.length; i++) {
            container.appendChild(sortRows[i][1]);
        }
        var container = document.getElementById("shipping_address_form");
        var tags = document.getElementById('shipping_address_form').getElementsByTagName('tr');
        var sortRows = [];
        for (var i=0; i<tags.length; i++) {
            var sortPart = tags[i].readAttribute('sort-data');
            if (sortPart >= 1) {
                sortRows.push([ 1 * sortPart , tags[i] ]);
            }
        }
        sortRows.sort(function(x, y) {
            return x[0] - y[0];
        });
        for (var i=0; i<sortRows.length; i++) {
            container.appendChild(sortRows[i][1]);
        }
}, false);


  
  document.addEventListener('DOMContentLoaded', function() {
        var rows = document.getElementById('supercheckout-tabs').getElementsByTagName("li"); 
        for (var i = 0; i < rows.length; i++) {   

         rows[i].onclick = function(){
             var current_class = this.className;
             if(current_class.search("active") < 0){
                 var new_class = current_class + ' active';
                 this.className = new_class;
             }             
             var rows2 = document.getElementById('supercheckout-tabs').getElementsByTagName("li"); 
             for (var j = 0; j < rows2.length; j++) {   
                 if(rows2[j] != this){
                     var modified_class = rows2[j].className;
                     modified_class = modified_class.replace(/\bactive\b/,'');
                     rows2[j].className = modified_class;
                 }
             }
         }

        }
}, false);

    
    
}else{
    
	document.attachEvent("onreadystatechange", function() {
        var container = document.getElementById("payment_address_form");
        var tags = document.getElementById('payment_address_form').getElementsByTagName('tr');
        var sortRows = [];
        for (var i=0; i<tags.length; i++) {
            var sortPart = tags[i].readAttribute('sort-data');
            if (sortPart >= 1) {
                sortRows.push([ 1 * sortPart , tags[i] ]);
            }
        }
        sortRows.sort(function(x, y) {
            return x[0] - y[0];
        });
        for (var i=0; i<sortRows.length; i++) {
            container.appendChild(sortRows[i][1]);
        }
        var container = document.getElementById("shipping_address_form");
        var tags = document.getElementById('shipping_address_form').getElementsByTagName('tr');
        var sortRows = [];
        for (var i=0; i<tags.length; i++) {
            var sortPart = tags[i].readAttribute('sort-data');
            if (sortPart >= 1) {
                sortRows.push([ 1 * sortPart , tags[i] ]);
            }
        }
        sortRows.sort(function(x, y) {
            return x[0] - y[0];
        });
        for (var i=0; i<sortRows.length; i++) {
            container.appendChild(sortRows[i][1]);
        }
}, false);


  
  document.attachEvent("onreadystatechange", function() {
        var rows = document.getElementById('supercheckout-tabs').getElementsByTagName("li"); 
        for (var i = 0; i < rows.length; i++) {   

         rows[i].onclick = function(){
             var current_class = this.className;
             if(current_class.search("active") < 0){
                 var new_class = current_class + ' active';
                 this.className = new_class;
             }             
             var rows2 = document.getElementById('supercheckout-tabs').getElementsByTagName("li"); 
             for (var j = 0; j < rows2.length; j++) {   
                 if(rows2[j] != this){
                     var modified_class = rows2[j].className;
                     modified_class = modified_class.replace(/\bactive\b/,'');
                     rows2[j].className = modified_class;
                 }
             }
         }

        }
}, false);
}
</script>
<style>
    tr.even { background-color: #EDEDED; }
    tr.odd { background-color: white; }
</style>
<script type="text/javascript">

//FUNCTION TO REMOVE CUSTOM HTML CONTENT
function remove_html(id){
    
    var data = angular.element( document.querySelector('#'+id)).attr('data');
    angular.element( document.querySelector('#portlet_'+ data)).remove();
    
    angular.element( document.querySelector('#modals-bootbox-prompt_h_'+ data)).remove();
    
    angular.element( document.querySelector('#three_col_h_'+data)).remove();
    
    angular.element( document.querySelector('#three_row_h_'+data)).remove();
    
    angular.element( document.querySelector('#three_col_ins_h_'+data)).remove();
    
    angular.element( document.querySelector('#two_col_h_'+data)).remove();
    angular.element( document.querySelector('#two_row_h_'+data)).remove();
    angular.element( document.querySelector('#two_col_ins_h_'+data)).remove();
    angular.element( document.querySelector('#one_col_h_'+data)).remove();
    angular.element( document.querySelector('#one_row_h_'+data)).remove();
    angular.element( document.querySelector('#one_col_ins_h_'+data)).remove();
}
jQuery(document).scroll(function() {
    
    var offset = (window.innerHeight);
    if (jQuery(this).scrollTop() >= jQuery('.supercheckout-admin-container').position().top) {
        show_fixed_button_panel();

    } else {
        hide_fixed_button_panel();
    }
});
function hide_fixed_button_panel() {
                            ////alert('hi');
    jQuery('.breadcrumb').removeClass('floating_panel');
    jQuery('#wrapper').css('margin-top', 0);
}
function show_fixed_button_panel() {
    jQuery('.breadcrumb').addClass('floating_panel');
    jQuery('#wrapper').css('margin-top', 75);
}
function removeSavedClass(){
        jQuery('.breadcrumb').removeClass('saved');
        //$('.velsof_success_topbar').css('display','none');
    }
    jQuery(document).ready(function(){
       setTimeout('removeSavedClass()', 2800); 
    });
    
</script>
<script type="text/javascript">
    //shopping cart setup
        $$('input[type="radio"][name="supercheckout[shopping_cart][show]"]').each(function(el) {
            $(el).observe('change', function() {
                if($(el).checked == true){
                    onPageLoad();
                }
            });
        });
        function onPageLoad(){
            var radioval = $$('input:checked[type="radio"][name="supercheckout[shopping_cart][show]"]').pluck('value');
            //alert(radioval);
            if( radioval == 'none')
            {
                $("tr_banner_url").hide();
                document.getElementById("span-general-show").innerHTML = '<font color="green"><?php echo $this->__("Only products of cart will be shown on popup."); ?></font>';
            }
            else if( radioval == 'banner')
            {
                $("tr_banner_url").show();
                document.getElementById("span-general-show").innerHTML = '<font color="green"><?php echo $this->__(" Banners (maximum 3) selected by admin will be shown with products of cart will be shown on popup."); ?></font>';
                    
                var banner_count = <?php echo isset($settings['shopping_cart']['banner_count'])?$settings['shopping_cart']['banner_count']:0; ?>;
                var count = $("hidden_banner_url_count").value;
                if(banner_count > count)
                {
                    for(var i = 0; i < banner_count; i++)
                    {
                        addbanner();
                    }
                }
            }
            else if( radioval == 'related_product')
            {
                $("tr_banner_url").hide();
                document.getElementById("span-general-show").innerHTML = '<font color="green"><?php echo $this->__(" 4 products related to products of cart will be shown on popup."); ?></font>';
            }
        }
        
        // Add two rows to add a bannner on clicking Add Banner Button 
        function addbanner(){
            var row = $("hidden_banner_url").value;
            var count = $("hidden_banner_url_count").value;
            
            addModule(parseInt(row));
            
            $("hidden_banner_url").value = parseInt(row)+1;
            $("hidden_banner_url_count").value = parseInt(count)+1;

            if(count >= 2)
            {
                document.getElementById("span_add_banner").innerHTML = '<font color="red"><b><?php echo $this->__("Maximum banners reached. No More banners are allowed."); ?></b></font>';
                $("btn_add_banner").setAttribute('disabled', true);
            }
            return false;
        }
        
        //        // Html for adding rows on clicking banner
        function addModule(row) {
            html = '<tr id="banner_url_row'+row+'">';
            html += '<td class="name" width="215px">';
            html += ' <span class="control-label">';
            html += ' <?php echo $this->__("Set banner url: "); ?> '+(parseInt(row)+1);
            html += ' </span>';
            html += '  </td> <td class="settings "  >';
            html += ' <div>';
            
            var bannerURL = '';
            if( row == 0)
            {
                bannerURL = '<?php if(isset($settings['shopping_cart']['banner_url'][0]))echo $settings['shopping_cart']['banner_url'][0]; ?>';
            }
            else if( row == 1)
            {
                bannerURL = '<?php if(isset($settings['shopping_cart']['banner_url'][1]))echo $settings['shopping_cart']['banner_url'][1]; ?>';
            }
            else if( row == 2)
            {
                bannerURL = '<?php if(isset($settings['shopping_cart']['banner_url'][2]))echo $settings['shopping_cart']['banner_url'][2]; ?>';
            }
            html += '<input class="input-sm form-control col-md-12" name="supercheckout[shopping_cart][banner_url][' + row + ']" type="text" value="'+ bannerURL +'" placeholder="http://www.example.com" >';
            html += ' </div>';
            html += ' </td> ';
            html += '</tr>';
            html += ' <tr id="banner_img_row'+row+'">';
            html += ' <td class="name">';
            html += ' <span class="control-label"> ';
            html += '<?php echo $this->__("Upload banner image(300X145): "); ?> '+(parseInt(row)+1);
            html += ' </span>';
            html += ' </td> ';
            html += '<td>';
            html += ' <div class="image">';
            
            html += ' <input type="hidden" class="banner_image_name" name="supercheckout[shopping_cart][image]['+row+']"';
            
            var imageName = '';
            if( row == 1)
            {
                imageName = '<?php if(isset($settings['shopping_cart']['image'][1]))echo $settings['shopping_cart']['image'][1]; ?>';
                html += ' value="<?php if(isset($settings['shopping_cart']['image'][1]))echo $settings['shopping_cart']['image'][1]; ?>"';
            }
            else if( row == 2)
            {
                imageName = '<?php if(isset($settings['shopping_cart']['image'][2]))echo $settings['shopping_cart']['image'][2]; ?>';
                html += ' value="<?php if(isset($settings['shopping_cart']['image'][2]))echo $settings['shopping_cart']['image'][2]; ?>"';
            }  
            else if( row == 0)
            {
                imageName = '<?php if(isset($settings['shopping_cart']['image'][0]))echo $settings['shopping_cart']['image'][0]; ?>';
                html += ' value="<?php if(isset($settings['shopping_cart']['image'][0]))echo $settings['shopping_cart']['image'][0]; ?>"';
            }  
            else 
            {
                html += ' value=""';
            }
            html += ' id="image_banner'+row+'"/> ';
            
            html += '<img width="300" height="145" src="';
            
            if( row == 0)
            {
<?php
if (isset($settings['shopping_cart']['image'][0])) {
    ?>
                    html += '<?php echo Mage::getBaseUrl('media') . "supercheckout/shopping_cart/banners/" . $settings['shopping_cart']['image'][0]; ?>';
<?php } else { ?>
                html += '<?php echo Mage::getDesign()->getSkinUrl("images/supercheckout/no_image.jpg"); ?>';
<?php } ?>
        }
        else if( row == 1)
        {
<?php
if (isset($settings['shopping_cart']['image'][1])) {
    ?>
                    html += '<?php echo Mage::getBaseUrl('media') . "supercheckout/shopping_cart/banners/" . $settings['shopping_cart']['image'][1]; ?>';
<?php } else { ?>
                html += '<?php echo Mage::getDesign()->getSkinUrl("images/supercheckout/no_image.jpg"); ?>';
<?php } ?>
        }
        else if( row == 2)
        {
<?php
if (isset($settings['shopping_cart']['image'][2])) {
    ?>
                    html += '<?php echo Mage::getBaseUrl('media') . "supercheckout/shopping_cart/banners/" . $settings['shopping_cart']['image'][2]; ?>';
<?php } else { ?>
                html += '<?php echo Mage::getDesign()->getSkinUrl("images/supercheckout/no_image.jpg"); ?>';
<?php } ?>
        }  
        else
        {
            html += '<?php echo Mage::getDesign()->getSkinUrl("images/supercheckout/no_image.jpg"); ?>';
        }
            
        html += '"';
        html += ' alt="" id="thumb_banner'+row+'" />';
        html += ' <br/><br/>';
            
        html += '<input type="file" name="banner[]" id="banner'+row+'" style="display:none;"/>';
        html += '<a onclick="browse_window('+row+');">';
        html += ' <?php echo "Browse"; ?> </a>';
        html += '<span id="imageName_banner'+row+'">'+ imageName +'</span>';
        html += '</div>';
        html += ' </div>'; 
        html += '<span class="remove_banner">';
        html += '<a id="btn_remove_banner" class="velsof-btn " onclick="return removebanner('+ row +')"> <?php echo $this->__("Remove Banner"); ?>  </a>';
        html += '</span>';
        html += '<div class="shoppingcart_imagePreview"><?php echo $this->__("Image preview will be available after saving the changes"); ?></span>';
        html += ' </td>';
        html += ' </tr>';
            
        $('tbl_banner_url').down('tbody').insert(html);
        document.getElementById("banner"+row).onchange = uploadOnChange;
    }

    /**
     * Function to validate the selected banner images for upload
     */
    function uploadOnChange() {
        var filename = this.value;
        var id = this.id;
        var file;
        file = this.files[0];
        
        var reader = new FileReader();
        var image  = new Image();

        reader.readAsDataURL(file);  
        reader.onload = function(_file) {
            image.src    = _file.target.result;              // url.createObjectURL(file);
            image.onload = function() {
                var w = this.width,
                h = this.height,
                t = file.type,                           // ext only: // file.type.split('/')[1],
                n = file.name,
                s = ~~(file.size/1024);

//                if(s == '0'){
//                    alert('<?php echo $this->__("Image size should greater than 0."); ?>');
//                    return false;
//                }else if(w != '300'){
//                    alert('<?php echo $this->__("Image width should be 300."); ?>');
//                    return false;
//                }
                //                else if(h != '145'){
                //                    alert('<?php echo $this->__("Image width*height should be 300*145."); ?>');
                //                    return false;
                //                }
                
                document.getElementById('imageName_'+ id).innerHTML = " - " + n;
                document.getElementById('image_'+ id).value = n;
                $('thumb_'+ id).setAttribute('src', '<?php echo Mage::getDesign()->getSkinUrl("images/supercheckout/no_image.jpg"); ?>');
            };
            image.onerror = function() {
                alert('Invalid file type: '+ file.type);
            };      
        };
        
    }
        
    /**
     * Remove banner on clicking Remove Banner button. 
     */
    function removebanner(row)
    {
        $("banner_url_row"+row).remove();
        $("banner_img_row"+row).remove();
        $("span_add_banner").insert('');
        $("btn_add_banner").removeAttribute("disabled");
        //$("hidden_banner_url").value = $("hidden_banner_url").value - 1;
        $("hidden_banner_url_count").value = $("hidden_banner_url_count").value - 1;
        
        if($("hidden_banner_url_count").value >= 2)
        {
            document.getElementById("span_add_banner").innerHTML = '';
        }
        
        return false;
    }
    
    /**
     * This function will call on click of browse button
     */
    function browse_window(ele){
        $("banner"+ele).click();
    }
    document.observe('dom:loaded', onPageLoad);
</script>
</div>